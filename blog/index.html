<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Blog · Metals</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="Scala language server with rich IDE features"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Blog · Metals"/><meta property="og:type" content="website"/><meta property="og:url" content="http://scalameta.org/metals/index.html"/><meta property="og:description" content="Scala language server with rich IDE features"/><meta property="og:image" content="http://scalameta.org/metals/img/scalameta-logo.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="http://scalameta.org/metals/img/scalameta-logo.png"/><link rel="shortcut icon" href="/metals/img/favicon.ico"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css"/><link rel="alternate" type="application/atom+xml" href="http://scalameta.org/metals/blog/atom.xml" title="Metals Blog ATOM Feed"/><link rel="alternate" type="application/rss+xml" href="http://scalameta.org/metals/blog/feed.xml" title="Metals Blog RSS Feed"/><script>
              (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
              (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
              m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
              })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

              ga('create', 'UA-140140828-1', 'auto');
              ga('send', 'pageview');
            </script><link rel="stylesheet" href="/metals/css/custom.css"/><script src="/metals/js/scrollSpy.js"></script><link rel="stylesheet" href="/metals/css/main.css"/><script src="/metals/js/codetabs.js"></script></head><body class="blog"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/metals/"><img class="logo" src="/metals/img/scalameta-logo.png" alt="Metals"/><h2 class="headerTitleWithLogo">Metals</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="/metals/docs/editors/overview.html" target="_self">Docs</a></li><li class="siteNavGroupActive siteNavItemActive"><a href="/metals/blog/" target="_self">Blog</a></li><li class=""><a href="https://github.com/scalameta/metals" target="_blank">GitHub</a></li><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>All Blog Posts</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">All Blog Posts</h3><ul class=""><li class="navListItem"><a class="navItem" href="/metals/blog/2020/11/26/lithium.html">Metals v0.9.7 - Lithium</a></li><li class="navListItem"><a class="navItem" href="/metals/blog/2020/11/20/lithium.html">Metals v0.9.6 - Lithium</a></li><li class="navListItem"><a class="navItem" href="/metals/blog/2020/11/10/lithium.html">Metals v0.9.5 - Lithium</a></li><li class="navListItem"><a class="navItem" href="/metals/blog/2020/11/06/sbt-BSP-support.html">sbt BSP support</a></li><li class="navListItem"><a class="navItem" href="/metals/blog/2020/09/21/lithium.html">Metals v0.9.4 - Lithium</a></li><li class="navListItem"><a class="navItem" href="/metals/blog/2020/08/19/lithium.html">Metals v0.9.3 - Lithium</a></li><li class="navListItem"><a class="navItem" href="/metals/blog/2020/07/23/configuring-a-client.html">A Dive into Configuring Metals</a></li><li class="navListItem"><a class="navItem" href="/metals/blog/2020/07/15/lithium.html">Metals v0.9.2 - Lithium</a></li><li class="navListItem"><a class="navItem" href="/metals/blog/2020/07/01/lithium.html">Metals v0.9.1 - Lithium</a></li><li class="navListItem"><a class="navItem" href="/metals/blog/2020/05/04/lithium.html">Metals v0.9.0 - Lithium</a></li><li class="navListItem"><a class="navItem" href="/metals/blog/2020/04/10/cobalt.html">Metals v0.8.4 - Cobalt</a></li><li class="navListItem"><a class="navItem" href="/metals/blog/2020/03/19/cobalt.html">Metals v0.8.3 - Cobalt</a></li><li class="navListItem"><a class="navItem" href="/metals/blog/2020/02/26/cobalt.html">Metals v0.8.1 - Cobalt</a></li><li class="navListItem"><a class="navItem" href="/metals/blog/2020/01/10/cobalt.html">Metals v0.8.0 - Cobalt</a></li><li class="navListItem"><a class="navItem" href="/metals/blog/2019/09/23/thorium.html">Metals v0.7.6 - Thorium</a></li><li class="navListItem"><a class="navItem" href="/metals/blog/2019/09/12/thorium.html">Metals v0.7.5 - Thorium</a></li><li class="navListItem"><a class="navItem" href="/metals/blog/2019/09/02/thorium.html">Metals v0.7.2 - Thorium</a></li><li class="navListItem"><a class="navItem" href="/metals/blog/2019/06/28/thorium.html">Metals v0.7.0 - Thorium</a></li><li class="navListItem"><a class="navItem" href="/metals/blog/2019/06/11/radium.html">Metals v0.6.1 - Radium</a></li><li class="navListItem"><a class="navItem" href="/metals/blog/2019/04/26/mercury.html">Metals v0.5.1</a></li><li class="navListItem"><a class="navItem" href="/metals/blog/2019/04/12/mercury.html">Metals v0.5.0</a></li><li class="navListItem"><a class="navItem" href="/metals/blog/2019/02/01/tin.html">Metals v0.4.4</a></li><li class="navListItem"><a class="navItem" href="/metals/blog/2019/01/24/tin.html">Metals v0.4.0</a></li><li class="navListItem"><a class="navItem" href="/metals/blog/2019/01/22/bloom-filters.html">Low-memory symbol indexing with bloom filters</a></li><li class="navListItem"><a class="navItem" href="/metals/blog/2018/12/14/iron.html">Metals v0.3.2</a></li><li class="navListItem"><a class="navItem" href="/metals/blog/2018/12/12/fast-goto-definition.html">Fast goto definition with low memory footprint</a></li><li class="navListItem"><a class="navItem" href="/metals/blog/2018/12/06/iron.html">Metals v0.3 - Iron</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer postContainer blogContainer"><div class="wrapper"><div class="posts"><div class="post"><header class="postHeader"><h1 class="postHeaderTitle"><a href="/metals/blog/2020/11/26/lithium.html">Metals v0.9.7 - Lithium</a></h1><p class="post-meta">November 26, 2020</p><div class="authorBlock"><p class="post-authorName"><a href="https://twitter.com/TomekGodzik" target="_blank" rel="noreferrer noopener">Tomasz Godzik</a></p><div class="authorPhoto"><a href="https://twitter.com/TomekGodzik" target="_blank" rel="noreferrer noopener"><img src="https://github.com/tgodzik.png" alt="Tomasz Godzik"/></a></div></div></header><article class="post-content"><div><span><p>We're happy to announce the release of Metals v0.9.7, which introduces the
support for the newest Scala 3 milestone, <code>3.0.0-M2</code>.</p>
<table>
<tbody>
  <tr>
    <td>Commits since last release</td>
    <td align="center">17</td>
  </tr>
  <tr>
    <td>Merged PRs</td>
    <td align="center">7</td>
  </tr>
    <tr>
    <td>Contributors</td>
    <td align="center">5</td>
  </tr>
  <tr>
    <td>Closed issues</td>
    <td align="center">3</td>
  </tr>
  <tr>
    <td>New features</td>
    <td align="center">0</td>
  </tr>
</tbody>
</table>
<p>For full details: <a href="https://github.com/scalameta/metals/milestone/30?closed=1">https://github.com/scalameta/metals/milestone/30?closed=1</a></p>
<p>Metals is a language server for Scala that works with VS Code, Vim, Emacs,
Sublime Text, Atom and Eclipse. Metals is developed at the
<a href="https://scala.epfl.ch/">Scala Center</a> and <a href="https://virtuslab.com">VirtusLab</a>
with the help from <a href="https://lunatech.com">Lunatech</a> along with contributors from
the community.</p>
<h2><a class="anchor" aria-hidden="true" id="tldr"></a><a href="#tldr" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>TL;DR</h2>
<p>Check out <a href="https://scalameta.org/metals/">https://scalameta.org/metals/</a>, and
give Metals a try!</p>
<ul>
<li>Scala 3.0.0-M2 support</li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="miscellaneous"></a><a href="#miscellaneous" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Miscellaneous</h2>
<ul>
<li>Don't add semanticDB plugin for Scala 2.10 when using sbt BSP.</li>
<li>Autocomplete empty scaladoc if nothing is defined afterwards.</li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="contributors"></a><a href="#contributors" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Contributors</h2>
<p>Big thanks to everybody who contributed to this release or reported an issue!</p>
<pre><code class="hljs"><span class="hljs-meta">$</span> <span class="hljs-string">git shortlog -sn --no-merges v0.9.6..v0.9.7</span>
<span class="hljs-attr">Tomasz</span> <span class="hljs-string">Godzik</span>
<span class="hljs-attr">Chris</span> <span class="hljs-string">Kipp</span>
<span class="hljs-attr">Bjorn</span> <span class="hljs-string">Regnell</span>
<span class="hljs-attr">Ethan</span> <span class="hljs-string">Atkins</span>
<span class="hljs-attr">Rikito</span> <span class="hljs-string">Taniguchi</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="merged-prs"></a><a href="#merged-prs" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Merged PRs</h2>
<h2><a class="anchor" aria-hidden="true" id="v097httpsgithubcomscalametametalstreev097-2020-11-26"></a><a href="#v097httpsgithubcomscalametametalstreev097-2020-11-26" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><a href="https://github.com/scalameta/metals/tree/v0.9.7">v0.9.7</a> (2020-11-26)</h2>
<p><a href="https://github.com/scalameta/metals/compare/v0.9.6...v0.9.7">Full Changelog</a></p>
<p><strong>Merged pull requests:</strong></p>
<ul>
<li>Add support for Scala 3 3.0.0-M2
<a href="https://github.com/scalameta/metals/pull/2260">#2260</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>Don't add semanticDB plugin for Scala 2.10 when using sbt BSP
<a href="https://github.com/scalameta/metals/pull/2258">#2258</a>
(<a href="https://github.com/ckipp01">ckipp01</a>)</li>
<li>Bump swoval to latest version
<a href="https://github.com/scalameta/metals/pull/2259">#2259</a>
(<a href="https://github.com/eatkins">eatkins</a>)</li>
<li>Fix documentation about buildTarget
<a href="https://github.com/scalameta/metals/pull/2257">#2257</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>Autocomplete empty scaladoc if nothing is defined afterwards
<a href="https://github.com/scalameta/metals/pull/2252">#2252</a>
(<a href="https://github.com/tanishiking">tanishiking</a>)</li>
<li>New directories namespace <code>io.github.soc</code> -&gt; <code>dev.dirs</code>
<a href="https://github.com/scalameta/metals/pull/2251">#2251</a>
(<a href="https://github.com/ckipp01">ckipp01</a>)</li>
<li>Add release notes for 0.9.6
<a href="https://github.com/scalameta/metals/pull/2249">#2249</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
</ul>
</span></div></article></div><div class="post"><header class="postHeader"><h1 class="postHeaderTitle"><a href="/metals/blog/2020/11/20/lithium.html">Metals v0.9.6 - Lithium</a></h1><p class="post-meta">November 20, 2020</p><div class="authorBlock"><p class="post-authorName"><a href="https://twitter.com/TomekGodzik" target="_blank" rel="noreferrer noopener">Tomasz Godzik</a></p><div class="authorPhoto"><a href="https://twitter.com/TomekGodzik" target="_blank" rel="noreferrer noopener"><img src="https://github.com/tgodzik.png" alt="Tomasz Godzik"/></a></div></div></header><article class="post-content"><div><span><p>We're happy to announce the release of Metals v0.9.6, which mostly concentrates
on adding support for the newly released Scala 2.13.4, but also adds some
improvements for already existing features.</p>
<table>
<tbody>
  <tr>
    <td>Commits since last release</td>
    <td align="center">59</td>
  </tr>
  <tr>
    <td>Merged PRs</td>
    <td align="center">31</td>
  </tr>
    <tr>
    <td>Contributors</td>
    <td align="center">4</td>
  </tr>
  <tr>
    <td>Closed issues</td>
    <td align="center">2</td>
  </tr>
  <tr>
    <td>New features</td>
    <td align="center">2</td>
  </tr>
</tbody>
</table>
<p>For full details: <a href="https://github.com/scalameta/metals/milestone/29?closed=1">https://github.com/scalameta/metals/milestone/29?closed=1</a></p>
<p>Metals is a language server for Scala that works with VS Code, Vim, Emacs,
Sublime Text, Atom and Eclipse. Metals is developed at the
<a href="https://scala.epfl.ch/">Scala Center</a> and <a href="https://virtuslab.com">VirtusLab</a>
with the help from <a href="https://lunatech.com">Lunatech</a> along with contributors from
the community.</p>
<h2><a class="anchor" aria-hidden="true" id="tldr"></a><a href="#tldr" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>TL;DR</h2>
<p>Check out <a href="https://scalameta.org/metals/">https://scalameta.org/metals/</a>, and
give Metals a try!</p>
<ul>
<li>Scala 2.13.4 support.</li>
<li>Show implicit conversions and classes.</li>
<li>Navigating stacktrace in debug console.</li>
<li>New troubleshooting page.</li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="show-implicit-conversions-and-classes"></a><a href="#show-implicit-conversions-and-classes" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Show implicit conversions and classes</h2>
<p>Last
<a href="/metals/blog/2020/11/10/lithium.html#show-implicits-and-type-decorations">release</a>
introduced the option to display additional data inferred from the code to a
user. Starting with this release it's also possible to show implicit conversions
and classes, which can be enabled by the additional
<code>showImplicitConversionsAndClasses</code> setting. Moreover, Visual Studio Code
extension has 3 new commands to toggle all these new options, which enables
users to quickly peek at the additional information about their code and then
turn it back off. All these commands can be bound to a shortcut to further
improve the user experience.</p>
<p><img src="https://i.imgur.com/k6GRgue.gif" alt="implicits"></p>
<p>Any editor that allows for quickly changing these settings will also benefit
from this change, as the file's decorations are refreshed instantly upon
changing any of those settings.</p>
<h2><a class="anchor" aria-hidden="true" id="navigating-stacktrace"></a><a href="#navigating-stacktrace" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Navigating stacktrace</h2>
<p>Previously, it was possible to navigate a stacktrace using the
<code>Analyze stacktrace</code> command which was added in the
<a href="/metals/blog/2020/09/21/lithium.html#analyze-stacktrace-command">v0.9.4</a>
release. It turns out, we can reuse the same mechanism to show file links in the
<code>Debug Console</code> in Visual Studio code:</p>
<p><img src="https://i.imgur.com/qeitymN.gif" alt="navigate-stacktrace"></p>
<p>This was achieved by adding additional information to the output already sent to
the editor, so this additional file links should also be reused by any other DAP
clients.</p>
<h2><a class="anchor" aria-hidden="true" id="troubleshooting"></a><a href="#troubleshooting" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Troubleshooting</h2>
<p>As an addition to these new features, we've also recently added a new
<a href="/metals/docs/troubleshooting/faq.html">troubleshooting page</a> that should answer
the most basic questions you can have. As the page is fairly new we would appreciate
any help in improving it so let us know if you feel anything is missing.</p>
<h2><a class="anchor" aria-hidden="true" id="miscellaneous"></a><a href="#miscellaneous" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Miscellaneous</h2>
<ul>
<li>Fix continuous compilation when opening tree view in sbt BSP</li>
<li>Add 0.27.0-RC1 back to supported versions</li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="contributors"></a><a href="#contributors" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Contributors</h2>
<p>Big thanks to everybody who contributed to this release or reported an issue!</p>
<pre><code class="hljs">$ git <span class="hljs-keyword">shortlog </span>-sn --no-merges <span class="hljs-built_in">v0</span>.<span class="hljs-number">9</span>.<span class="hljs-number">5</span>..v0.<span class="hljs-number">9</span>.<span class="hljs-number">6</span>
Tomasz Godzik
<span class="hljs-keyword">Scala </span>Steward
Chris Kipp
Gabriele Petronella
Krzysiek <span class="hljs-keyword">Bochenek
</span>dependabot[<span class="hljs-keyword">bot]
</span></code></pre>
<h2><a class="anchor" aria-hidden="true" id="merged-prs"></a><a href="#merged-prs" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Merged PRs</h2>
<h2><a class="anchor" aria-hidden="true" id="v096httpsgithubcomscalametametalstreev096-2020-11-20"></a><a href="#v096httpsgithubcomscalametametalstreev096-2020-11-20" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><a href="https://github.com/scalameta/metals/tree/v0.9.6">v0.9.6</a> (2020-11-20)</h2>
<p><a href="https://github.com/scalameta/metals/compare/v0.9.5...v0.9.6">Full Changelog</a></p>
<p><strong>Merged pull requests:</strong></p>
<ul>
<li>Refresh synthetics when user settings change
<a href="https://github.com/scalameta/metals/pull/2246">#2246</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>Update scalameta to 4.4.0 and add support for Scala 2.13.4
<a href="https://github.com/scalameta/metals/pull/2247">#2247</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>Add source and line to debug output in case of stack traces
<a href="https://github.com/scalameta/metals/pull/2243">#2243</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>Fix continuous compilation when opening tree view in sbt BSP
<a href="https://github.com/scalameta/metals/pull/2242">#2242</a>
(<a href="https://github.com/ckipp01">ckipp01</a>)</li>
<li>Add option to show implicit conversions as decorations
<a href="https://github.com/scalameta/metals/pull/2232">#2232</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>Bump olafurpg/setup-gpg from v2 to v3
<a href="https://github.com/scalameta/metals/pull/2240">#2240</a>
(<a href="https://github.com/dependabot[bot]">dependabot[bot]</a>)</li>
<li>Move dependabot config file to right location
<a href="https://github.com/scalameta/metals/pull/2239">#2239</a>
(<a href="https://github.com/gabro">gabro</a>)</li>
<li>Configure dependabot to update github-actions
<a href="https://github.com/scalameta/metals/pull/2237">#2237</a>
(<a href="https://github.com/gabro">gabro</a>)</li>
<li>Reorganize docs and add in FAQ.
<a href="https://github.com/scalameta/metals/pull/2234">#2234</a>
(<a href="https://github.com/ckipp01">ckipp01</a>)</li>
<li>Update scribe, scribe-slf4j to 3.0.4
<a href="https://github.com/scalameta/metals/pull/2222">#2222</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Update org.eclipse.lsp4j, ... to 0.10.0
<a href="https://github.com/scalameta/metals/pull/2230">#2230</a>
(<a href="https://github.com/kpbochenek">kpbochenek</a>)</li>
<li>Update munit-docs, sbt-munit to 0.7.17
<a href="https://github.com/scalameta/metals/pull/2231">#2231</a>
(<a href="https://github.com/kpbochenek">kpbochenek</a>)</li>
<li>Update sbt-ci-release to 1.5.4
<a href="https://github.com/scalameta/metals/pull/2221">#2221</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Update bloop-config, bloop-launcher to 1.4.5-6-4768184c
<a href="https://github.com/scalameta/metals/pull/2220">#2220</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Update sbt-dotty to 0.4.6
<a href="https://github.com/scalameta/metals/pull/2219">#2219</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Update coursier to 2.0.6
<a href="https://github.com/scalameta/metals/pull/2223">#2223</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Update munit to 0.7.17 <a href="https://github.com/scalameta/metals/pull/2228">#2228</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Update mdoc-interfaces to 2.2.12
<a href="https://github.com/scalameta/metals/pull/2227">#2227</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Update mdoc, sbt-mdoc to 2.2.12
<a href="https://github.com/scalameta/metals/pull/2226">#2226</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Update flyway-core to 7.2.0
<a href="https://github.com/scalameta/metals/pull/2225">#2225</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Add 0.27.0-RC1 back to supported versions
<a href="https://github.com/scalameta/metals/pull/2213">#2213</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>Add additional newline to fix problems with markdown
<a href="https://github.com/scalameta/metals/pull/2215">#2215</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>Add additional troubleshooting section for mirrors
<a href="https://github.com/scalameta/metals/pull/2211">#2211</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>Add testing for DownloadDependencies
<a href="https://github.com/scalameta/metals/pull/2206">#2206</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>Update docs to mention <code>inlineDecorationProvider</code>
<a href="https://github.com/scalameta/metals/pull/2209">#2209</a>
(<a href="https://github.com/ckipp01">ckipp01</a>)</li>
<li>Fix release notes to mention emacs
<a href="https://github.com/scalameta/metals/pull/2205">#2205</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>Fix scala3Dependency for various binary scala3/dotty versions
<a href="https://github.com/scalameta/metals/pull/2203">#2203</a>
(<a href="https://github.com/ckipp01">ckipp01</a>)</li>
<li>Update release docs <a href="https://github.com/scalameta/metals/pull/2199">#2199</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>Correct typos in blog and Doctor
<a href="https://github.com/scalameta/metals/pull/2202">#2202</a>
(<a href="https://github.com/ckipp01">ckipp01</a>)</li>
<li>Add release notes for 0.9.5
<a href="https://github.com/scalameta/metals/pull/2197">#2197</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>Add in blog post about sbt BSP
<a href="https://github.com/scalameta/metals/pull/2193">#2193</a>
(<a href="https://github.com/ckipp01">ckipp01</a>)</li>
</ul>
</span></div></article></div><div class="post"><header class="postHeader"><h1 class="postHeaderTitle"><a href="/metals/blog/2020/11/10/lithium.html">Metals v0.9.5 - Lithium</a></h1><p class="post-meta">November 10, 2020</p><div class="authorBlock"><p class="post-authorName"><a href="https://twitter.com/TomekGodzik" target="_blank" rel="noreferrer noopener">Tomasz Godzik</a></p><div class="authorPhoto"><a href="https://twitter.com/TomekGodzik" target="_blank" rel="noreferrer noopener"><img src="https://github.com/tgodzik.png" alt="Tomasz Godzik"/></a></div></div></header><article class="post-content"><div><span><p>We're happy to announce the release of Metals v0.9.5, which brings about some of
the long awaited features such as implicit decorations and the organize imports
code action. We also greatly simplified connecting to the sbt BSP server and
added support for Scala 3's first milestone <code>3.0.0-M1</code>.</p>
<table>
<tbody>
  <tr>
    <td>Commits since last release</td>
    <td align="center">185</td>
  </tr>
  <tr>
    <td>Merged PRs</td>
    <td align="center">70</td>
  </tr>
    <tr>
    <td>Contributors</td>
    <td align="center">9</td>
  </tr>
  <tr>
    <td>Closed issues</td>
    <td align="center">33</td>
  </tr>
  <tr>
    <td>New features</td>
    <td align="center">5</td>
  </tr>
</tbody>
</table>
<p>For full details: <a href="https://github.com/scalameta/metals/milestone/28?closed=1">https://github.com/scalameta/metals/milestone/28?closed=1</a></p>
<p>Metals is a language server for Scala that works with VS Code, Vim, Emacs,
Sublime Text, Atom and Eclipse. Metals is developed at the
<a href="https://scala.epfl.ch/">Scala Center</a> and <a href="https://virtuslab.com">VirtusLab</a>
with the help from <a href="https://lunatech.com">Lunatech</a> along with contributors from
the community.</p>
<h2><a class="anchor" aria-hidden="true" id="tldr"></a><a href="#tldr" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>TL;DR</h2>
<p>Check out <a href="https://scalameta.org/metals/">https://scalameta.org/metals/</a>, and
give Metals a try!</p>
<ul>
<li>Organize imports code action.</li>
<li>Show implicit parameters and inferred type decorations.</li>
<li>Improved sbt BSP support.</li>
<li>Support for Scala 3.0.0-M1.</li>
<li>Remote debugging.</li>
<li>Environment variables in run/debug.</li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="organize-imports-code-action"></a><a href="#organize-imports-code-action" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Organize imports code action</h2>
<p>One of the most requested features in the Metals repository, current list can be
found <a href="https://github.com/scalameta/metals/issues/707">here</a>, was the ability to
automatically organize imports. We are happy to announce, that thanks to
<a href="https://github.com/mlachkar">mlachkar's</a> amazing contributions to both
<a href="https://github.com/scalacenter/scalafix">Scalafix</a> and Metals, this new feature
is now available via an <code>Organize imports</code> code action.</p>
<p><img src="https://i.imgur.com/8YBdjjC.gif" alt="imports"></p>
<p>Depending on the editor this code action can be invoked differently, please
consult your specific editor's documentation. For example in Visual Studio Code
'organize imports' can be invoked from command console, shortcut, or from the
dropdown menu when right clicking inside a file.</p>
<p>The organize imports code action is enabled using
<a href="https://github.com/scalacenter/scalafix">Scalafix</a> and specifically the awesome
organize imports rule created by <a href="https://github.com/liancheng">liancheng</a>.</p>
<p>The rule can be used to automatically sort imports in a file by the Ascii order,
which is the default setting, or use the user specific configuration defined
using scalafix configuration file. This file can be either <code>.scalafix.conf</code> in
the current workspace or an absolute file specified in the
<code>metals.scalafixConfigPath</code> user setting. It's important to note that the new
code action is consistent with how sbt's scalafix plugin will behave.</p>
<p>An example scalafix configuration for the organize imports rule can look like
this:</p>
<pre><code class="hljs css language-scala"><span class="hljs-type">OrganizeImports</span> {
  groups = [<span class="hljs-string">"javax?\\."</span>, <span class="hljs-string">"scala."</span>, <span class="hljs-string">"*"</span>]
  removeUnused = <span class="hljs-literal">true</span>
}
</code></pre>
<p>This will sort imports into 3 groups defined with regexes and remove any unused
ones. Specifically, it will turn:</p>
<pre><code class="hljs css language-scala"><span class="hljs-keyword">import</span> scala.collection.mutable.{<span class="hljs-type">Buffer</span>, <span class="hljs-type">ArrayBuffer</span>}
<span class="hljs-keyword">import</span> java.time.<span class="hljs-type">Clock</span>
<span class="hljs-keyword">import</span> java.lang.{<span class="hljs-type">Long</span> =&gt; <span class="hljs-type">JLong</span>, <span class="hljs-type">Double</span> =&gt; <span class="hljs-type">JDouble</span>}

<span class="hljs-class"><span class="hljs-keyword">object</span> <span class="hljs-title">RemoveUnused</span> </span>{
  <span class="hljs-keyword">val</span> buffer: <span class="hljs-type">ArrayBuffer</span>[<span class="hljs-type">Int</span>] = <span class="hljs-type">ArrayBuffer</span>.empty[<span class="hljs-type">Int</span>]
  <span class="hljs-keyword">val</span> long: <span class="hljs-type">JLong</span> = <span class="hljs-type">JLong</span>.parseLong(<span class="hljs-string">"0"</span>)
}
</code></pre>
<p>into</p>
<pre><code class="hljs css language-scala"><span class="hljs-keyword">import</span> java.lang.{<span class="hljs-type">Long</span> =&gt; <span class="hljs-type">JLong</span>}

<span class="hljs-keyword">import</span> scala.collection.mutable.<span class="hljs-type">ArrayBuffer</span>

<span class="hljs-class"><span class="hljs-keyword">object</span> <span class="hljs-title">RemoveUnused</span> </span>{
  <span class="hljs-keyword">val</span> buffer: <span class="hljs-type">ArrayBuffer</span>[<span class="hljs-type">Int</span>] = <span class="hljs-type">ArrayBuffer</span>.empty[<span class="hljs-type">Int</span>]
  <span class="hljs-keyword">val</span> long: <span class="hljs-type">JLong</span> = <span class="hljs-type">JLong</span>.parseLong(<span class="hljs-string">"0"</span>)
}
</code></pre>
<p>Please do NOT use the Scalafix built-in RemoveUnused.imports together with
OrganizeImports to remove unused imports, since it might result in a broken
code.</p>
<p>More information can be found in the
<a href="https://github.com/liancheng/scalafix-organize-imports">liancheng/scalafix-organize-imports</a>
repository.</p>
<h2><a class="anchor" aria-hidden="true" id="show-implicits-and-type-decorations"></a><a href="#show-implicits-and-type-decorations" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Show implicits and type decorations</h2>
<p>Another highly anticipated feature was the ability to show additional
information about the code, which is not provided explicitly. In this new
release, users can use two new options when looking through their code:</p>
<ul>
<li><code>metals.showImplicitArguments</code> will enable users to see implicit parameters
within their code:</li>
</ul>
<p><img src="https://i.imgur.com/vAvM7YV.png" alt="params"></p>
<ul>
<li><code>metals.showInferredType</code> will enable users to see inferred type for any
generic methods they are using:</li>
</ul>
<p><img src="https://i.imgur.com/K3QrUd2.png" alt="types"></p>
<p>Both new options are disabled by default, since they add a great number of
information, which might not be necessary for all users. Full name with package
for each of the additional types or values will be available on hover.</p>
<p>These options can be set in Metals options in VS Code or in Emacs
<a href="https://github.com/emacs-lsp/lsp-metals">(lsp-metals)</a> using
<code>lsp-metals-show-implicit-arguments</code> and <code>lsp-metals-show-inferred-type</code>
variables set to <code>t</code>.</p>
<p>Unfortunately, due to current limitations, additional decorations are only
possible in Visual Studio Code and Emacs. In other editors the additional
information is available via hover and new <code>With synthetics added</code> section,
which shows how the whole current line would look with the additional
decorations.</p>
<p>Example of how this alternative approach looks in Vim:</p>
<p><img src="https://user-images.githubusercontent.com/13974112/94804295-e094a280-03ea-11eb-8282-2a783446e7c8.png" alt="vim-sample"></p>
<h2><a class="anchor" aria-hidden="true" id="improved-sbt-bsp-support"></a><a href="#improved-sbt-bsp-support" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Improved sbt BSP support</h2>
<p>In recent months, <a href="https://github.com/eed3si9n">eed3si9n</a> and
<a href="https://github.com/adpi2">adpi2</a> worked, under the auspices of Scala Center, on
making sbt capable of acting as a
<a href="https://build-server-protocol.github.io/">Build Server Protocol</a> server. This
enables Metals and other editors such as Intellij IDEA to directly communicate
with sbt in order to compile the user's code.</p>
<p>Some more work was required in order to make the new features work smoothly with
Metals and currently, thanks to <a href="https://github.com/ckipp01">ckipp01</a>, users can
easily try out the new sbt BSP support. It's important to note that using Bloop
instead of sbt is still the recommended approach as we believe it provides the
best user experience and features like running or debugging are still not yet
implemented for sbt. More details and explanations can be found in the
<a href="/metals/blog/2020/11/06/sbt-BSP-support">blogpost</a>.</p>
<h2><a class="anchor" aria-hidden="true" id="remote-debugging"></a><a href="#remote-debugging" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Remote debugging</h2>
<p>Thanks to the great work of <a href="https://github.com/pvid">pvid</a>, Metals now supports
remote debugging, which means that it can attach to a running process with the
proper JVM options specified. There is no longer a need to run the application
or test from within the editor.</p>
<p>In case of a simple java process those options will take a form of for example:</p>
<p><code>-agentlib:jdwp=transport=dt_socket,server=y,suspend=y,address=5005</code></p>
<p>Some of the more important options here are:</p>
<ul>
<li><code>suspend=y</code> will make the process wait for Metals to connect to it if
specified to <code>y</code>. <code>n</code> will cause the process to run normally.</li>
<li><code>address=5005</code> specifies which port to use and it can be any free port.</li>
</ul>
<p>For a detailed explanation of the different options please refer to the proper
documentation
<a href="https://docs.oracle.com/javase/8/docs/technotes/guides/jpda/conninv.html">here</a></p>
<p>When using sbt, remote debugging can be achieved by specifying additional
settings:</p>
<pre><code class="hljs css language-scala">  javaOptions in run := <span class="hljs-type">List</span>(<span class="hljs-string">"-agentlib:jdwp=transport=dt_socket,server=y,suspend=y,address=5005"</span>),
  fork in run := <span class="hljs-literal">true</span>
</code></pre>
<p>This will cause running <code>sbt run</code> to wait for Metals to connect to it, which
might be especially useful when reading user input, which is currently
impossible to do for example from within VS Code. Similarly, these options can
be specified in any of the supported build tools.</p>
<p>To later connect to the running process, you need to use the additional Attach
request type with the <code>buildTarget</code>, <code>hostname</code> and <code>port</code> fields specified. In
case of Visual Studio Code this will take a form of:</p>
<pre><code class="hljs css language-json">{
  <span class="hljs-attr">"type"</span>: <span class="hljs-string">"scala"</span>,
  <span class="hljs-attr">"request"</span>: <span class="hljs-string">"attach"</span>,
  <span class="hljs-attr">"name"</span>: <span class="hljs-string">"Attach"</span>,
  <span class="hljs-attr">"buildTarget"</span>: <span class="hljs-string">"root"</span>,
  <span class="hljs-attr">"hostName"</span>: <span class="hljs-string">"localhost"</span>,
  <span class="hljs-attr">"port"</span>: <span class="hljs-number">5005</span>
}
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="environment-variables-in-rundebug"></a><a href="#environment-variables-in-rundebug" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Environment variables in run/debug</h2>
<p>Metals now supports specifying additional environment options when running or
debugging applications. This can be done twofold:</p>
<ul>
<li>By specifying the new <code>env</code> field:</li>
</ul>
<pre><code class="hljs css language-json">{
  <span class="hljs-attr">"type"</span>: <span class="hljs-string">"scala"</span>,
  <span class="hljs-attr">"name"</span>: <span class="hljs-string">"Debug Main"</span>,
  <span class="hljs-attr">"request"</span>: <span class="hljs-string">"launch"</span>,
  <span class="hljs-attr">"mainClass"</span>: <span class="hljs-string">"Main"</span>,
  <span class="hljs-attr">"args"</span>: [<span class="hljs-string">"hello"</span>, <span class="hljs-string">"world"</span>],
  <span class="hljs-attr">"env"</span>: { <span class="hljs-attr">"VARIABLE1"</span>: <span class="hljs-string">" 123"</span> }
}
</code></pre>
<ul>
<li>By using the <code>envFile</code> field:</li>
</ul>
<pre><code class="hljs css language-json">{
  <span class="hljs-attr">"type"</span>: <span class="hljs-string">"scala"</span>,
  <span class="hljs-attr">"name"</span>: <span class="hljs-string">"Debug Main"</span>,
  <span class="hljs-attr">"request"</span>: <span class="hljs-string">"launch"</span>,
  <span class="hljs-attr">"mainClass"</span>: <span class="hljs-string">"Main"</span>,
  <span class="hljs-attr">"args"</span>: [<span class="hljs-string">"hello"</span>, <span class="hljs-string">"world"</span>],
  <span class="hljs-attr">"envFile"</span>: <span class="hljs-string">"local.env"</span>
}
</code></pre>
<p>Where the <code>local.env</code> file can take a form of:</p>
<pre><code class="hljs"><span class="hljs-comment"># single line values</span>
<span class="hljs-attribute">key1</span>=value 1
<span class="hljs-attribute">key2</span>=<span class="hljs-string">'value 2'</span>   # ignored inline comment
<span class="hljs-attribute">key3</span>=<span class="hljs-string">"value 3"</span>

<span class="hljs-comment"># multi-line values</span>
<span class="hljs-attribute">key4</span>=<span class="hljs-string">'line 1
line 2'</span>
<span class="hljs-attribute">key5</span>=<span class="hljs-string">"line 1
line 2"</span>

<span class="hljs-comment"># export statements</span>
<span class="hljs-builtin-name">export</span> <span class="hljs-attribute">key6</span>=value 6

<span class="hljs-comment"># comma delimiter</span>
key7:value 6

<span class="hljs-comment"># keys cannot contain dots or dashes</span>
a.b.<span class="hljs-attribute">key8</span>=value 8   # will be ignored
<span class="hljs-attribute">a-b-key9</span>=value 9   # will be ignored
</code></pre>
<p>The format is adapted from
<a href="https://github.com/mefellows/sbt-dotenv">mefellows/sbt-dotenv</a> and
<a href="https://github.com/bkeepers/dotenv">bkeepers/dotenv</a>. Example json
configurations above are defined for Visual Studio Code, the <code>type</code> and <code>name</code>
fields can be omitted when using in other clients.</p>
<p>This new feature has been contributed by <a href="https://github.com/mwz">mwz</a>. Thanks
for the great work!</p>
<h2><a class="anchor" aria-hidden="true" id="miscellaneous"></a><a href="#miscellaneous" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Miscellaneous</h2>
<ul>
<li>Removed <code>javax</code> from default excluded packages - it can be added back in the
configuration.</li>
<li>Fixed top level completions in empty files.</li>
<li>Fixed issues with run/debug when using VPN.</li>
<li>Fixed go to java sources in standalone worksheets.</li>
<li>Fixed issues with worksheets if the workspace was not first compiled.</li>
<li>Fixed sbt completions coming from <code>project/*.scala</code> files.</li>
<li>Only use <code>import {java.util =&gt; ju}</code> when there are conflicting symbols in the
file.</li>
<li>Muted InvalidProtocolException in the logs - this exception might happen.
normally and does not break anything.</li>
<li>Changed scalafix and scalafmt location in user configuration to absolute path.</li>
<li>Only report parsing errors after Scala version is confirmed for a file.</li>
<li>Added automatic retry in case of build server connection failure.</li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="contributors"></a><a href="#contributors" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Contributors</h2>
<p>Big thanks to everybody who contributed to this release or reported an issue!</p>
<pre><code class="hljs"><span class="hljs-meta">$</span> <span class="hljs-string">git shortlog -sn --no-merges v0.9.4..v0.9.5</span>
<span class="hljs-attr">Chris</span> <span class="hljs-string">Kipp</span>
<span class="hljs-attr">Scala</span> <span class="hljs-string">Steward</span>
<span class="hljs-attr">Tomasz</span> <span class="hljs-string">Godzik</span>
<span class="hljs-attr">Michael</span> <span class="hljs-string">Wizner</span>
<span class="hljs-attr">Meriam</span> <span class="hljs-string">Lachkar</span>
<span class="hljs-attr">Gabriele</span> <span class="hljs-string">Petronella</span>
<span class="hljs-attr">Krzysiek</span> <span class="hljs-string">Bochenek</span>
<span class="hljs-attr">Pavol</span> <span class="hljs-string">Vidlicka</span>
<span class="hljs-attr">Vadim</span> <span class="hljs-string">Chelyshov</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="merged-prs"></a><a href="#merged-prs" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Merged PRs</h2>
<h2><a class="anchor" aria-hidden="true" id="v095httpsgithubcomscalametametalstreev095-2020-11-10"></a><a href="#v095httpsgithubcomscalametametalstreev095-2020-11-10" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><a href="https://github.com/scalameta/metals/tree/v0.9.5">v0.9.5</a> (2020-11-10)</h2>
<p><a href="https://github.com/scalameta/metals/compare/v0.9.4...v0.9.5">Full Changelog</a></p>
<p><strong>Merged pull requests:</strong></p>
<ul>
<li>Rename user configuration options for decoration provider
<a href="https://github.com/scalameta/metals/pull/2196">#2196</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>Show warning about unsupported Scala version in worksheets
<a href="https://github.com/scalameta/metals/pull/2194">#2194</a>
(<a href="https://github.com/ckipp01">ckipp01</a>)</li>
<li>Add support for Scala3 3.0.0-M1
<a href="https://github.com/scalameta/metals/pull/2190">#2190</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>Update scalafix <a href="https://github.com/scalameta/metals/pull/2192">#2192</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>Add retry in case of timeout in build/initialize
<a href="https://github.com/scalameta/metals/pull/2184">#2184</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>Ensure scalacOptions for Test are correct for sbt BSP.
<a href="https://github.com/scalameta/metals/pull/2191">#2191</a>
(<a href="https://github.com/ckipp01">ckipp01</a>)</li>
<li>Support remote debugging
<a href="https://github.com/scalameta/metals/pull/2125">#2125</a>
(<a href="https://github.com/pvid">pvid</a>)</li>
<li>Add in timer methods to a new timerProvider.
<a href="https://github.com/scalameta/metals/pull/2186">#2186</a>
(<a href="https://github.com/ckipp01">ckipp01</a>)</li>
<li>Remove condition for jfr, since it's now reliably available on CI
<a href="https://github.com/scalameta/metals/pull/2185">#2185</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>Make sure build server is connected or not available before parsing
<a href="https://github.com/scalameta/metals/pull/2169">#2169</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>Preload scalafix to optimize first organize imports run
<a href="https://github.com/scalameta/metals/pull/2168">#2168</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>Allow for reset in html doctor
<a href="https://github.com/scalameta/metals/pull/2172">#2172</a>
(<a href="https://github.com/ckipp01">ckipp01</a>)</li>
<li>Track and show progress to user about connecting to sbt
<a href="https://github.com/scalameta/metals/pull/2182">#2182</a>
(<a href="https://github.com/ckipp01">ckipp01</a>)</li>
<li>Remove old bloop script now that we just use coursier
<a href="https://github.com/scalameta/metals/pull/2181">#2181</a>
(<a href="https://github.com/ckipp01">ckipp01</a>)</li>
<li>Update interface to 1.0.1
<a href="https://github.com/scalameta/metals/pull/2178">#2178</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Update mdoc-interfaces, sbt-mdoc to 2.2.10
<a href="https://github.com/scalameta/metals/pull/2180">#2180</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Update flyway-core to 7.0.4
<a href="https://github.com/scalameta/metals/pull/2179">#2179</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Update coursier to 2.0.5
<a href="https://github.com/scalameta/metals/pull/2177">#2177</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Update scribe, scribe-slf4j to 2.8.6
<a href="https://github.com/scalameta/metals/pull/2176">#2176</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Update guava to 30.0-jre
<a href="https://github.com/scalameta/metals/pull/2175">#2175</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Update bloop-config, bloop-launcher to 1.4.4-23-dbacf644
<a href="https://github.com/scalameta/metals/pull/2174">#2174</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Update sbt-dotty to 0.4.5
<a href="https://github.com/scalameta/metals/pull/2173">#2173</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Fix resolver for sbt-metals snapshot
<a href="https://github.com/scalameta/metals/pull/2170">#2170</a>
(<a href="https://github.com/ckipp01">ckipp01</a>)</li>
<li>Enable smoother sbt bsp integration.
<a href="https://github.com/scalameta/metals/pull/2154">#2154</a>
(<a href="https://github.com/ckipp01">ckipp01</a>)</li>
<li>Change scalafix and scalafmt conf to absolute path
<a href="https://github.com/scalameta/metals/pull/2165">#2165</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>Fix race condition while using textDocument/foldingRange
<a href="https://github.com/scalameta/metals/pull/2166">#2166</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>Account for possible null value in ScalaTarget's baseDirectory
<a href="https://github.com/scalameta/metals/pull/2164">#2164</a>
(<a href="https://github.com/ckipp01">ckipp01</a>)</li>
<li>Update mill scripts <a href="https://github.com/scalameta/metals/pull/2162">#2162</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>Mute InvalidProtocolException which might happen normally
<a href="https://github.com/scalameta/metals/pull/2159">#2159</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>Update sbt to 1.4.1 <a href="https://github.com/scalameta/metals/pull/2161">#2161</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>Make sure that default version is picked up for Scalafmt provider
<a href="https://github.com/scalameta/metals/pull/2158">#2158</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>Don't import {java.util =&gt; ju} when no conflicting symbols are available
<a href="https://github.com/scalameta/metals/pull/2155">#2155</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>Fixed sbt completions coming from project/*.scala
<a href="https://github.com/scalameta/metals/pull/2129">#2129</a>
(<a href="https://github.com/dos65">dos65</a>)</li>
<li>Add java sources to standalone worksheets and run compilation before
evaluation if necessary.
<a href="https://github.com/scalameta/metals/pull/2133">#2133</a>
(<a href="https://github.com/ckipp01">ckipp01</a>)</li>
<li>Bump setup-scala and cache-action actions
<a href="https://github.com/scalameta/metals/pull/2149">#2149</a>
(<a href="https://github.com/ckipp01">ckipp01</a>)</li>
<li>Add JFR for non oracle JDK releases
<a href="https://github.com/scalameta/metals/pull/2137">#2137</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>Bump scalafmt up to 2.7.4
<a href="https://github.com/scalameta/metals/pull/2148">#2148</a>
(<a href="https://github.com/ckipp01">ckipp01</a>)</li>
<li>Update scalameta, semanticdb-scalac, ... to 4.3.24
<a href="https://github.com/scalameta/metals/pull/2147">#2147</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Update munit, sbt-munit to 0.7.14
<a href="https://github.com/scalameta/metals/pull/2146">#2146</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Update jol-core to 0.14
<a href="https://github.com/scalameta/metals/pull/2144">#2144</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Update flyway-core to 7.0.3
<a href="https://github.com/scalameta/metals/pull/2143">#2143</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Update undertow-core to 2.2.2.Final
<a href="https://github.com/scalameta/metals/pull/2142">#2142</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Update coursier to 2.0.3
<a href="https://github.com/scalameta/metals/pull/2141">#2141</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Update scribe, scribe-slf4j to 2.8.3
<a href="https://github.com/scalameta/metals/pull/2140">#2140</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Update ujson to 1.2.2 <a href="https://github.com/scalameta/metals/pull/2139">#2139</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Update jackson-databind to 2.11.3
<a href="https://github.com/scalameta/metals/pull/2138">#2138</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Use 127.0.0.1 address always for DebugProvider
<a href="https://github.com/scalameta/metals/pull/2135">#2135</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>Add support for loading env variables from a .env file.
<a href="https://github.com/scalameta/metals/pull/2123">#2123</a>
(<a href="https://github.com/mwz">mwz</a>)</li>
<li>Do not show hover if the type is error
<a href="https://github.com/scalameta/metals/pull/2126">#2126</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>Make sure files are compiled when running scalafix
<a href="https://github.com/scalameta/metals/pull/2119">#2119</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>Show implicit arguments and type annotations for Scala files
<a href="https://github.com/scalameta/metals/pull/2103">#2103</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>Account for possible null value on PopupChoiceReset message request
<a href="https://github.com/scalameta/metals/pull/2121">#2121</a>
(<a href="https://github.com/ckipp01">ckipp01</a>)</li>
<li>Support environment variables when running or debugging
<a href="https://github.com/scalameta/metals/pull/2118">#2118</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>Add in top level-completions for empty file.
<a href="https://github.com/scalameta/metals/pull/2088">#2088</a>
(<a href="https://github.com/ckipp01">ckipp01</a>)</li>
<li>Update scalafix-interfaces to 0.9.21
<a href="https://github.com/scalameta/metals/pull/2114">#2114</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Update sbt-mdoc to 2.2.9
<a href="https://github.com/scalameta/metals/pull/2113">#2113</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Update flyway-core to 6.5.7
<a href="https://github.com/scalameta/metals/pull/2112">#2112</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Update undertow-core to 2.2.0.Final
<a href="https://github.com/scalameta/metals/pull/2111">#2111</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Update directory-watcher to 0.10.1
<a href="https://github.com/scalameta/metals/pull/2110">#2110</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Update scribe, scribe-slf4j to 2.7.13
<a href="https://github.com/scalameta/metals/pull/2109">#2109</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Update sbt-scalafix, scalafix-interfaces to 0.9.21
<a href="https://github.com/scalameta/metals/pull/2108">#2108</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Update bloop-config, bloop-launcher to 1.4.4-15-56a96a99
<a href="https://github.com/scalameta/metals/pull/2107">#2107</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Update organize-import rule to add Scala 2.11 support
<a href="https://github.com/scalameta/metals/pull/2101">#2101</a>
(<a href="https://github.com/gabro">gabro</a>)</li>
<li>Simplify TestHovers and remove warning
<a href="https://github.com/scalameta/metals/pull/2098">#2098</a>
(<a href="https://github.com/gabro">gabro</a>)</li>
<li>Display used BuildServer in Doctor
<a href="https://github.com/scalameta/metals/pull/2097">#2097</a>
(<a href="https://github.com/kpbochenek">kpbochenek</a>)</li>
<li>Implement organize import using scalafix
<a href="https://github.com/scalameta/metals/pull/1971">#1971</a>
(<a href="https://github.com/mlachkar">mlachkar</a>)</li>
<li>Remove javax from default excluded packages
<a href="https://github.com/scalameta/metals/pull/2091">#2091</a>
(<a href="https://github.com/gabro">gabro</a>)</li>
<li>Add documentation for new parameter in GotoLocation
<a href="https://github.com/scalameta/metals/pull/2095">#2095</a>
(<a href="https://github.com/kpbochenek">kpbochenek</a>)</li>
<li>Fix Metals version in the blog post
<a href="https://github.com/scalameta/metals/pull/2089">#2089</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>Add release notes for v0.9.4
<a href="https://github.com/scalameta/metals/pull/2081">#2081</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
</ul>
</span></div></article></div><div class="post"><header class="postHeader"><h1 class="postHeaderTitle"><a href="/metals/blog/2020/11/06/sbt-BSP-support.html">sbt BSP support</a></h1><p class="post-meta">November 6, 2020</p><div class="authorBlock"><p class="post-authorName"><a href="https://twitter.com/ckipp01" target="_blank" rel="noreferrer noopener">Chris Kipp</a></p><div class="authorPhoto"><a href="https://twitter.com/ckipp01" target="_blank" rel="noreferrer noopener"><img src="https://avatars2.githubusercontent.com/u/13974112?v=4" alt="Chris Kipp"/></a></div></div></header><article class="post-content"><div><span><p>If you've been following the <a href="https://github.com/sbt/sbt/releases">sbt
releases</a>, 1.4.x introduced some great new
features, one of those being BSP support. This effort was initiated by community
members and proposed to the <a href="https://github.com/scalacenter/advisoryboard/blob/master/proposals/023-bsp.md">Scala Center Advisory
Board</a>.
Then thanks to the work of <a href="https://twitter.com/adrienpi2">Adrien Piquerez</a> and
<a href="https://twitter.com/eed3si9n">Eugene Yokota</a> BSP support became a reality in
1.4.0. You can read more about the reason behind the work and some of the
details of the implementation in this blog post: <a href="https://www.scala-lang.org/blog/2020/10/27/bsp-in-sbt.html">BSP Support in sbt
1.4</a>.</p>
<p>The Metals team is also happy to announce that as of the 0.9.5 release, the
process to use other BSP servers like sbt is now much smoother. In some ways,
BSP is an implementation detail abstracted away from a user, and you may not
directly interact at all with your build server, even though it's pivotal for
the Metals experience. Therefore, we'd like to answer some common questions
about what this means to you as a user, explain some of the default choices
Metals makes for you, and show you how to explore the sbt BSP server.</p>
<h2><a class="anchor" aria-hidden="true" id="what-is-bsp"></a><a href="#what-is-bsp" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>What is BSP?</h2>
<p>First off, you may be wondering what BSP is. The <a href="https://build-server-protocol.github.io/">Build Server
Protocol</a> (BSP) is a <em>Protocol for IDEs and
build tools to communicate about compilation, running, testing, debugging, and
much more.</em> If you're familiar with the <a href="https://microsoft.github.io/language-server-protocol/">Language Server
Protocol</a> (LSP), BSP is
complementary to LSP and inspired by it. Where LSP allows your editor to
abstract over various programming languages by a shared way to communicate to a
language server, BSP allows IDE's to abstract over various build servers. A
typical example of this can be illustrated like so:</p>
<p><img src="https://i.imgur.com/0RRUDlU.png" alt="LSP BSP example"></p>
<p>You have your editor (Emacs) communicating with Metals via LSP, and then Metals
communicating with a BSP server (Bloop) via BSP. This communication over BSP can
be about compiling your code, running your code, defining sources in your
workspace, etc. You can read all about the various communication types <a href="https://build-server-protocol.github.io/docs/specification#actual-protocol">here in
the
protocol</a>.</p>
<p><a href="https://scalacenter.github.io/bloop/">Bloop</a> was the first server to implement
BSP, and it's the default build server for all build tools that Metals supports
at the moment. When you open a fresh project, you're prompted to import your
build, and this import process is running a form of &quot;Bloop Install&quot; to write
your build definition to <code>.bloop/</code> for Bloop to read and use. Then as you
continue to edit, diagnostics and other information are flowing back and forth
from Metals to Bloop. Hopefully this gives you a brief picture of what BSP is,
and how it's used in Metals.</p>
<h2><a class="anchor" aria-hidden="true" id="what-does-sbt-bsp-support-mean-for-metals"></a><a href="#what-does-sbt-bsp-support-mean-for-metals" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>What does sbt BSP support mean for Metals?</h2>
<p>Another question you may have is &quot;what does sbt BSP support mean for Metals&quot;?
This means a couple different things. Up until this point, if you wanted to use
sbt BSP, you needed to clear your <code>.metals/</code> and <code>.bloop</code> directories, and then
start sbt with a specific flag before connecting to it. None of this is
necessary anymore. In order for <a href="https://build-server-protocol.github.io/docs/server-discovery.html">BSP
discovery</a>
to happen, you need a <code>.bsp/*json</code> file with instructions on how to
start/connect to the build server. A new command has been added to Metals (which
we'll go over down below) that can generate this file for you if it doesn't
exist, and then you will be automatically connected to sbt. If this file already
exist, then we provide a simple way for you to &quot;switch&quot; build servers and for
your choice to be remembered. We also automatically include an sbt plugin to
ensure the correct semantic information is produced by the compiler. So to
summarize, Metals now has the ability to generate the necessary <code>.bsp/sbt.json</code>
file if it doesn't exist, and to also switch back and forth from using Bloop or
sbt as your build server.</p>
<h2><a class="anchor" aria-hidden="true" id="whats-the-difference-between-bloop-and-sbt-bsp"></a><a href="#whats-the-difference-between-bloop-and-sbt-bsp" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>What's the difference between Bloop and sbt BSP?</h2>
<p>At this point you may be asking, &quot;what's the difference?&quot;. For an average user,
there may not be a ton of difference, however I'd like to outline a couple
things that may be relevant to you.</p>
<ul>
<li>Bloop supports the <a href="https://microsoft.github.io/debug-adapter-protocol/">Debug Adapter
Protocol</a> (DAP) and sbt
doesn't. So you'll notice when using sbt as a build server, you won't have
the <code>run</code> or <code>debug</code> code lenses directly in your editor like you do with
Bloop.</li>
<li>Bloop writes all the necessary information about your build it needs to disk
whereas sbt loads it into memory. If you're a user that works for long
periods of time on a single project, then this may not matter to you at all.
However, if you jump in and out of projects, without having sbt shell
running, then you will pay the cost of loading up your build every time.</li>
<li>Bloop offers sbt file support that enables completions and hover, whereas
this is not yet available in the sbt BSP implementation.</li>
<li>sbt gives you access to the full task graph, so for example if you're using
<code>BuildInfo</code>, and you compile with Bloop, your <code>BuildInfo</code> won't get
generated. However, sources will get generated when using sbt server. This
can help avoid any potential inconsistencies.</li>
</ul>
<p>While there are some more differences, these are probably the main ones you'll
notice as a user. These are both great tools, and you'll have to explore more to
see what is the best fit for you. For now, Metals defaults to using Bloop mainly
because we believe it provides a richer feature set and because pretty much all
of our testing includes Bloop as a build server.</p>
<h2><a class="anchor" aria-hidden="true" id="how-do-i-try-it-out"></a><a href="#how-do-i-try-it-out" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>How do I try it out?</h2>
<p>Now to the good stuff. There are two main ways that you can start using sbt
server in Metals.</p>
<h3><a class="anchor" aria-hidden="true" id="no-bspsbtjson-exists"></a><a href="#no-bspsbtjson-exists" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>No <code>.bsp/sbt.json</code> exists</h3>
<p>If no <code>.bsp/sbt.json</code> exists yet, you can generate it with the new
<code>metals.generate-bsp-config</code> command. At any time you can execute this command
and Metals will ensure that you're on the minimum required sbt version (1.4.1),
generate the <code>.bsp/sbt.json</code> file for you, include the necessary plugin, and
then auto-connect to the sbt build server. For example in VS Code this looks
like this:</p>
<h3><a class="anchor" aria-hidden="true" id="metalsgenerate-bsp-config"></a><a href="#metalsgenerate-bsp-config" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>metals.generate-bsp-config</code></h3>
<p><img src="https://i.imgur.com/kBNbtzI.gif" alt="generate-bsp-config"></p>
<h3><a class="anchor" aria-hidden="true" id="bspsbtjson-already-exists"></a><a href="#bspsbtjson-already-exists" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>.bsp/sbt.json</code> already exists</h3>
<p>If you've ran sbt on your project already, your <code>.bsp/sbt.json</code> file will
already exist. In this case, you can simply use the <code>metals.bsp-switch</code> command
and choose sbt. For example, using <code>coc-metals</code>, it looks like this:</p>
<h3><a class="anchor" aria-hidden="true" id="metalsbsp-switch"></a><a href="#metalsbsp-switch" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>metals.bsp-switch</code></h3>
<p><img src="https://i.imgur.com/6tY2ofL.gif" alt="bsp-switch"></p>
<h3><a class="anchor" aria-hidden="true" id="switching-back-to-bloop"></a><a href="#switching-back-to-bloop" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Switching back to Bloop</h3>
<p>After you do a <code>metals.bsp-switch</code> or <code>metals-generate-bsp-config</code>, your choice
will be remembered. So the next time that you open your workspace, you will
automatically connect to the last build server you had chosen. If you'd like to
go back to your previous build server, you can simply use the
<code>metals.bsp-switch</code> command again to choose your previous server. For editors
that have an html doctor, you can also reset your build server choice in the
Doctor.</p>
<h3><a class="anchor" aria-hidden="true" id="doctor-reset"></a><a href="#doctor-reset" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Doctor reset</h3>
<p><img src="https://i.imgur.com/YEGfEGB.png" alt="Doctor"></p>
<h2><a class="anchor" aria-hidden="true" id="conclusion"></a><a href="#conclusion" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Conclusion</h2>
<p>We hope you enjoy this easier way to use sbt server with Metals. If you're
curious about the implementation details, much of the work was done in <a href="https://github.com/scalameta/metals/pull/2154">this
pr</a>. As always please don't
hesitate to ask questions on our various channels, submit issues, or create new
feature requests.</p>
</span></div></article></div><div class="post"><header class="postHeader"><h1 class="postHeaderTitle"><a href="/metals/blog/2020/09/21/lithium.html">Metals v0.9.4 - Lithium</a></h1><p class="post-meta">September 21, 2020</p><div class="authorBlock"><p class="post-authorName"><a href="https://twitter.com/TomekGodzik" target="_blank" rel="noreferrer noopener">Tomasz Godzik</a></p><div class="authorPhoto"><a href="https://twitter.com/TomekGodzik" target="_blank" rel="noreferrer noopener"><img src="https://github.com/tgodzik.png" alt="Tomasz Godzik"/></a></div></div></header><article class="post-content"><div><span><p>We're happy to announce the release of Metals v0.9.4, which focuses on
improvements in Scala 3 worksheets, a couple of new features, and a number of
smaller improvements.</p>
<table>
<tbody>
  <tr>
    <td>Commits since last release</td>
    <td align="center">115</td>
  </tr>
  <tr>
    <td>Merged PRs</td>
    <td align="center">50</td>
  </tr>
    <tr>
    <td>Contributors</td>
    <td align="center">6</td>
  </tr>
  <tr>
    <td>Closed issues</td>
    <td align="center">15</td>
  </tr>
  <tr>
    <td>New features</td>
    <td align="center">2</td>
  </tr>
</tbody>
</table>
<p>For full details: <a href="https://github.com/scalameta/metals/milestone/27?closed=1">https://github.com/scalameta/metals/milestone/27?closed=1</a></p>
<p>Metals is a language server for Scala that works with VS Code, Vim, Emacs,
Sublime Text, Atom and Eclipse. Metals is developed at the
<a href="https://scala.epfl.ch/">Scala Center</a> and <a href="https://virtuslab.com">VirtusLab</a>
with the help from <a href="https://lunatech.com">Lunatech</a> along with contributors from
the community.</p>
<h2><a class="anchor" aria-hidden="true" id="tldr"></a><a href="#tldr" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>TL;DR</h2>
<p>Check out <a href="https://scalameta.org/metals/">https://scalameta.org/metals/</a>, and
give Metals a try!</p>
<ul>
<li>Scala 0.26.0 and 0.27.0-RC1 support.</li>
<li>Analyze stacktrace command</li>
<li>Customizable package exclusions</li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="analyze-stacktrace-command"></a><a href="#analyze-stacktrace-command" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Analyze stacktrace command</h2>
<p>Thanks to <a href="https://github.com/kpbochenek">kpbochenek</a>, Metals can now help with
navigating stack traces using the new <code>metals.analyze-stacktrace</code> command. The
only thing it needs is the actual stack trace string to be input as a parameter
to the command. This new functionality works differently in various editors.</p>
<h3><a class="anchor" aria-hidden="true" id="visual-studio-code"></a><a href="#visual-studio-code" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Visual Studio Code</h3>
<p>The only thing users need to do is copy the stack trace and run the
<code>Analyze Stacktrace</code> command from the command palette. This will display a new
web view, where it will be possible for users to navigate the files that are
included in the exception.</p>
<p><img src="https://i.imgur.com/WBU4hvT.gif" alt="stacktrace-vscode"></p>
<h3><a class="anchor" aria-hidden="true" id="coc-metals"></a><a href="#coc-metals" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>coc-metals</h3>
<p>With <code>coc-metals</code>, you just need to copy the stacktrace, whether from sbt,
bloop-cli, or somewhere else into your register. Once you have it copied, you
can just execute the <code>metals.analyze-stacktrace</code>command. This will create
a<code>.metals/stracktrace.scala</code> file which can be used to navigate through your
stacktrace using code lenses. Keep in mind that you'll want to make sure you
have codeLens.enable set to true in your configuration. Also, since this feature
relies on code lenses (virtual text in Nvim), it's only supported in Nvim.</p>
<p><img src="https://camo.githubusercontent.com/54a9cb68547532b2ff16cb6f95fdd8268d806b41/68747470733a2f2f692e696d6775722e636f6d2f74516a694147322e676966" alt="stacktrace-nvim"></p>
<h3><a class="anchor" aria-hidden="true" id="other-editors"></a><a href="#other-editors" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Other editors</h3>
<p>To make it work with any other editors users need to run the command manually
with the stacktrace as input, similar to the example above with <code>coc-metals</code>.
The command will generate a new file, <code>.metals/stacktrace.scala</code>, which can be
used to navigate through the stacktrace using code lenses.</p>
<h2><a class="anchor" aria-hidden="true" id="customizable-package-exclusions"></a><a href="#customizable-package-exclusions" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Customizable package exclusions</h2>
<p>Usually, a number of packages are almost never used by the developers and could
clutter the language server output while being of little benefit to the users.
Metals would exclude those packages from indexing causing them to not be
recommended for completions, symbol searches, and code actions. Previously that
list was set in stone and consisted of a number of prefixes:</p>
<pre><code class="hljs css language-scala"><span class="hljs-keyword">val</span> defaultExclusions: <span class="hljs-type">List</span>[<span class="hljs-type">String</span>] = <span class="hljs-type">List</span>(
    <span class="hljs-string">"META-INF/"</span>, <span class="hljs-string">"images/"</span>, <span class="hljs-string">"toolbarButtonGraphics/"</span>, <span class="hljs-string">"jdk/"</span>, <span class="hljs-string">"sun/"</span>, <span class="hljs-string">"javax/"</span>,
    <span class="hljs-string">"oracle/"</span>, <span class="hljs-string">"java/awt/desktop/"</span>, <span class="hljs-string">"org/jcp/"</span>, <span class="hljs-string">"org/omg/"</span>, <span class="hljs-string">"org/graalvm/"</span>,
    <span class="hljs-string">"com/oracle/"</span>, <span class="hljs-string">"com/sun/"</span>, <span class="hljs-string">"com/apple/"</span>, <span class="hljs-string">"apple/"</span>
  )
</code></pre>
<p>This list might work in most cases, but users might also want to customize the
list according to their preferences and domain they are working on. Starting
with this release it is now possible to define additional exclusions as well as
remove some from the default list. This can be done via an additional Metals
user setting:</p>
<pre><code class="hljs css language-json">"metals.excluded-packages" : [
  "akka.actor.typed.javadsl", "--javax"
]
</code></pre>
<p><code>--</code> should only be used to remove some of the defaults if they aren't needed
for your project. Thanks to <a href="https://github.com/ckipp01">ckipp01</a> for
contributing this feature!</p>
<h2><a class="anchor" aria-hidden="true" id="miscellaneous"></a><a href="#miscellaneous" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Miscellaneous</h2>
<p>Some of the smaller improvements to Metals include:</p>
<ul>
<li>New recommended Maven Scala template.</li>
<li>Fix go to source and auto imports in standalone worksheet files.</li>
<li>Fix missing classes from _empty package in tree view.</li>
<li>Add a command to quickly create a new worksheet with a default name.</li>
</ul>
<p>Beside all the core work on the server itself, there have also been a lot of
great work done in various other Scalameta projects, which Metals relies on.
These projects include <a href="http://github.com/scalameta/mdoc">mdoc</a>, which powers
worksheets and <a href="http://github.com/scalameta/scalameta">Scalameta</a>, which powers
all SemanticDB and parsing powered features. Those contributions helped to
unlock and improve Dotty support in Metals. So special thanks to those projects
and contributors.</p>
<h2><a class="anchor" aria-hidden="true" id="contributors"></a><a href="#contributors" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Contributors</h2>
<p>Big thanks to everybody who contributed to this release or reported an issue!</p>
<pre><code class="hljs"><span class="hljs-meta">$</span> <span class="hljs-string">git shortlog -sn --no-merges v0.9.3..v0.9.4</span>
<span class="hljs-attr">Scala</span> <span class="hljs-string">Steward</span>
<span class="hljs-attr">Chris</span> <span class="hljs-string">Kipp</span>
<span class="hljs-attr">Tomasz</span> <span class="hljs-string">Godzik</span>
<span class="hljs-attr">Krzysztof</span> <span class="hljs-string">Bochenek</span>
<span class="hljs-attr">Ethan</span> <span class="hljs-string">Atkins</span>
<span class="hljs-attr">Joseph</span> <span class="hljs-string">Price</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="merged-prs"></a><a href="#merged-prs" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Merged PRs</h2>
<h2><a class="anchor" aria-hidden="true" id="v094httpsgithubcomscalametametalstreev094-2020-09-21"></a><a href="#v094httpsgithubcomscalametametalstreev094-2020-09-21" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><a href="https://github.com/scalameta/metals/tree/v0.9.4">v0.9.4</a> (2020-09-21)</h2>
<p><a href="https://github.com/scalameta/metals/compare/v0.9.3...v0.9.4">Full Changelog</a></p>
<p><strong>Merged pull requests:</strong></p>
<ul>
<li>Bump other reference of coursier/cache
<a href="https://github.com/scalameta/metals/pull/2087">#2087</a>
(<a href="https://github.com/ckipp01">ckipp01</a>)</li>
<li>Use built-in fetch depth and bump coursier cache
<a href="https://github.com/scalameta/metals/pull/2086">#2086</a>
(<a href="https://github.com/ckipp01">ckipp01</a>)</li>
<li>Refactor NewFileProvider
<a href="https://github.com/scalameta/metals/pull/2085">#2085</a>
(<a href="https://github.com/ckipp01">ckipp01</a>)</li>
<li>Strip out <code>[E]</code> or <code>[error]</code> from stacktrace in analyzer.
<a href="https://github.com/scalameta/metals/pull/2083">#2083</a>
(<a href="https://github.com/ckipp01">ckipp01</a>)</li>
<li>Update Bloop to 1.4.4-13-408f4d80
<a href="https://github.com/scalameta/metals/pull/2080">#2080</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>Update mdoc version to 2.2.9
<a href="https://github.com/scalameta/metals/pull/2079">#2079</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>Change new-scala-file to enable quick creation of a file.
<a href="https://github.com/scalameta/metals/pull/2075">#2075</a>
(<a href="https://github.com/ckipp01">ckipp01</a>)</li>
<li>Update sbt-jmh to 0.4.0
<a href="https://github.com/scalameta/metals/pull/2071">#2071</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Update xnio-nio to 3.8.2.Final
<a href="https://github.com/scalameta/metals/pull/2067">#2067</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Update scalameta, semanticdb-scalac, ... to 4.3.22
<a href="https://github.com/scalameta/metals/pull/2070">#2070</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Update sbt-mdoc to 2.2.8
<a href="https://github.com/scalameta/metals/pull/2069">#2069</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Update mdoc-interfaces to 2.2.8
<a href="https://github.com/scalameta/metals/pull/2068">#2068</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Update undertow-core to 2.1.4.Final
<a href="https://github.com/scalameta/metals/pull/2066">#2066</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Update coursier to 2.0.0-RC6-26
<a href="https://github.com/scalameta/metals/pull/2065">#2065</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Update sbt-scalafix to 0.9.20
<a href="https://github.com/scalameta/metals/pull/2064">#2064</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Update bloop-config, bloop-launcher to 1.4.3-31-b16d7e50
<a href="https://github.com/scalameta/metals/pull/2063">#2063</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Fix wrong definition position for worksheets
<a href="https://github.com/scalameta/metals/pull/2060">#2060</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>Fix typo in StringBloomFilter.scala
<a href="https://github.com/scalameta/metals/pull/2059">#2059</a>
(<a href="https://github.com/joprice">joprice</a>)</li>
<li>Add support for dotty 0.27.0-RC1 and update mdoc
<a href="https://github.com/scalameta/metals/pull/2058">#2058</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>Don't search for runTest code lenses in Ammonite scripts and worksheets.
<a href="https://github.com/scalameta/metals/pull/2057">#2057</a>
(<a href="https://github.com/ckipp01">ckipp01</a>)</li>
<li>Look into ammonite flakiness in tests to see if we can remove it
<a href="https://github.com/scalameta/metals/pull/2054">#2054</a>
(<a href="https://github.com/ckipp01">ckipp01</a>)</li>
<li>Add in new version of Ammonite
<a href="https://github.com/scalameta/metals/pull/2056">#2056</a>
(<a href="https://github.com/ckipp01">ckipp01</a>)</li>
<li>Fix missing classes from <em>empty</em> package in treeView.
<a href="https://github.com/scalameta/metals/pull/2053">#2053</a>
(<a href="https://github.com/ckipp01">ckipp01</a>)</li>
<li>Remove TravisCI stuff <a href="https://github.com/scalameta/metals/pull/2055">#2055</a>
(<a href="https://github.com/ckipp01">ckipp01</a>)</li>
<li>Correct the way userConfig examples are displayed.
<a href="https://github.com/scalameta/metals/pull/2045">#2045</a>
(<a href="https://github.com/ckipp01">ckipp01</a>)</li>
<li>Customizable package exclusions
<a href="https://github.com/scalameta/metals/pull/2012">#2012</a>
(<a href="https://github.com/ckipp01">ckipp01</a>)</li>
<li>Update interface to 0.0.25
<a href="https://github.com/scalameta/metals/pull/2038">#2038</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Update emacs docs to include latest lsp-metals changes
<a href="https://github.com/scalameta/metals/pull/2033">#2033</a>
(<a href="https://github.com/kpbochenek">kpbochenek</a>)</li>
<li>Update scalameta, semanticdb-scalac, ... to 4.3.21
<a href="https://github.com/scalameta/metals/pull/2042">#2042</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Update sbt-munit to 0.7.12
<a href="https://github.com/scalameta/metals/pull/2041">#2041</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Update jol-core to 0.13
<a href="https://github.com/scalameta/metals/pull/2040">#2040</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Update flyway-core to 6.5.5
<a href="https://github.com/scalameta/metals/pull/2039">#2039</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Update coursier to 2.0.0-RC6-25
<a href="https://github.com/scalameta/metals/pull/2037">#2037</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Update file-tree-views to 2.1.5
<a href="https://github.com/scalameta/metals/pull/2036">#2036</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Update bloop-config, bloop-launcher to 1.4.3-27-dfdc9971
<a href="https://github.com/scalameta/metals/pull/2035">#2035</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Update sbt-dotty to 0.4.2
<a href="https://github.com/scalameta/metals/pull/2034">#2034</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Fix auto imports and go to sources for worksheets outside sources
<a href="https://github.com/scalameta/metals/pull/2030">#2030</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>Add Maven template to the curated list of templates
<a href="https://github.com/scalameta/metals/pull/2028">#2028</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>Add support for dotty 0.26.0
<a href="https://github.com/scalameta/metals/pull/2027">#2027</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>Bump memory for test forks to 2GB
<a href="https://github.com/scalameta/metals/pull/2025">#2025</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>Update sbt docs to better explain how to manually install Metals prior to
0.7.6 version <a href="https://github.com/scalameta/metals/pull/2026">#2026</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>Add parallel tests <a href="https://github.com/scalameta/metals/pull/1985">#1985</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>Remove old gitignore and graal stuff.
<a href="https://github.com/scalameta/metals/pull/2022">#2022</a>
(<a href="https://github.com/ckipp01">ckipp01</a>)</li>
<li>Clear fingerprints when semanticdb hash matches
<a href="https://github.com/scalameta/metals/pull/2021">#2021</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>Change link in blog post to absolute path
<a href="https://github.com/scalameta/metals/pull/2019">#2019</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>Switch file watching library to swoval
<a href="https://github.com/scalameta/metals/pull/2014">#2014</a>
(<a href="https://github.com/eatkins">eatkins</a>)</li>
<li>Move releases to github actions
<a href="https://github.com/scalameta/metals/pull/2015">#2015</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>Analyze stacktrace <a href="https://github.com/scalameta/metals/pull/1966">#1966</a>
(<a href="https://github.com/kpbochenek">kpbochenek</a>)</li>
<li>Fix typo in vscode docs
<a href="https://github.com/scalameta/metals/pull/2010">#2010</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>Add release notes for 0.9.3
<a href="https://github.com/scalameta/metals/pull/2008">#2008</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
</ul>
</span></div></article></div><div class="post"><header class="postHeader"><h1 class="postHeaderTitle"><a href="/metals/blog/2020/08/19/lithium.html">Metals v0.9.3 - Lithium</a></h1><p class="post-meta">August 19, 2020</p><div class="authorBlock"><p class="post-authorName"><a href="https://twitter.com/TomekGodzik" target="_blank" rel="noreferrer noopener">Tomasz Godzik</a></p><div class="authorPhoto"><a href="https://twitter.com/TomekGodzik" target="_blank" rel="noreferrer noopener"><img src="https://github.com/tgodzik.png" alt="Tomasz Godzik"/></a></div></div></header><article class="post-content"><div><span><p>We're happy to announce the release of Metals v0.9.3, which adds a couple of
useful new features as well as support for Scala 0.25.0 and 0.26.0-RC1.</p>
<table>
<tbody>
  <tr>
    <td>Commits since last release</td>
    <td align="center">123</td>
  </tr>
  <tr>
    <td>Merged PRs</td>
    <td align="center">59</td>
  </tr>
    <tr>
    <td>Contributors</td>
    <td align="center">9</td>
  </tr>
  <tr>
    <td>Closed issues</td>
    <td align="center">31</td>
  </tr>
  <tr>
    <td>New features</td>
    <td align="center">3</td>
  </tr>
</tbody>
</table>
<p>For full details: <a href="https://github.com/scalameta/metals/milestone/26?closed=1">https://github.com/scalameta/metals/milestone/26?closed=1</a></p>
<p>Metals is a language server for Scala that works with VS Code, Vim, Emacs,
Sublime Text, Atom and Eclipse. Metals is developed at the
<a href="https://scala.epfl.ch/">Scala Center</a> and <a href="https://virtuslab.com">VirtusLab</a>
with the help from <a href="https://lunatech.com">Lunatech</a> along with contributors from
the community.</p>
<h2><a class="anchor" aria-hidden="true" id="tldr"></a><a href="#tldr" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>TL;DR</h2>
<p>Check out <a href="https://scalameta.org/metals/">https://scalameta.org/metals/</a>, and
give Metals a try!</p>
<ul>
<li>sbt script support with hover, completions and go to definition.</li>
<li>Scala 3 worksheet support</li>
<li>Scala 0.25.0 and 0.26.0-RC1 support.</li>
<li>Main classes from dependencies can now be run</li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="sbt-script-support"></a><a href="#sbt-script-support" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>sbt script support</h2>
<p>Thanks to the great work by <a href="https://github.com/dos65">dos65</a> Metals now
supports sbt script files as well as build's Scala files. The full list of
currently supported features is available
<a href="/metals/docs/editors/overview.html#additional-file-types">here</a>.</p>
<p>sbt support is is achived by generating additional <code>metals.sbt</code> file for each
level of sbt's project. For <code>build.sbt</code> we now generate
<code>project/project/metals.sbt</code>, for <code>project/other.sbt</code>
<code>project/project/project/metals.sbt</code> etc. This is needed for the Bloop plugin to
properly generate information in the <code>.bloop</code> configuration files. It's
recommended to gitignore <code>metals.sbt</code> and <code>.bloop</code> anywhere in the file tree.</p>
<h2><a class="anchor" aria-hidden="true" id="scala-3-worksheet-support"></a><a href="#scala-3-worksheet-support" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Scala 3 worksheet support</h2>
<p>Finally, it is now possible to run worksheets for Scala 3 starting with version
0.26.0-RC1. To try it out users need to create the worksheet inside of a Scala 3
source directory and then they can be used the same way as with previously
supported worksheets.</p>
<p>This is a great place for anyone to experiment with Scala 3 and see what is
coming around the corner!</p>
<p><img src="https://i.imgur.com/DZvz3Le.gif" alt="worksheet-sample"></p>
<h2><a class="anchor" aria-hidden="true" id="running-main-classes-from-dependencies"></a><a href="#running-main-classes-from-dependencies" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Running main classes from dependencies</h2>
<p>Previously, users could only run main classes that are defined in the
sourcecode, which made it impossible to run and debug in certain frameworks such
as the <a href="https://www.playframework.com/">Play Framework</a>. Metals now searches the
classpath additionally to find any classes that are defined by the user and not
available in the main sources.</p>
<p>To run any such class a full name needs to be provided via the configuration.</p>
<p>For example in Visual Studio Code this would look like this:</p>
<pre><code class="hljs css language-json">{
  <span class="hljs-attr">"version"</span>: <span class="hljs-string">"0.2.0"</span>,
  <span class="hljs-attr">"configurations"</span>: [
    {
      <span class="hljs-attr">"type"</span>: <span class="hljs-string">"scala"</span>,
      <span class="hljs-attr">"request"</span>: <span class="hljs-string">"launch"</span>,
      <span class="hljs-attr">"name"</span>: <span class="hljs-string">"Play main"</span>,
      <span class="hljs-attr">"mainClass"</span>: <span class="hljs-string">"play.core.server.ProdServerStart"</span>,
      <span class="hljs-attr">"buildTarget"</span>: <span class="hljs-string">"root"</span>,
      <span class="hljs-attr">"args"</span>: [],
      <span class="hljs-attr">"jvmOptions"</span>: []
    }
  ]
}
</code></pre>
<p>In other editors users need to provide the same parameters for the run
configuration.</p>
<h2><a class="anchor" aria-hidden="true" id="miscellaneous"></a><a href="#miscellaneous" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Miscellaneous</h2>
<ul>
<li>Removed breakpoints are no longer hit.</li>
<li>Compilation is invoked only once for any change.</li>
<li>Worksheets now display types next to the code.</li>
<li>Fixed wrong completions in string interpolation.</li>
<li>Bloop now copies old artifacts by default even if the workspace does not
compile.</li>
<li>Fixed duplicate code actions in case of range selection.</li>
<li>Fixed <code>metals.enableStripMargin</code> option to work without restarting the
workspace.</li>
<li>Signature help now also triggers when typing <code>,</code></li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="contributors"></a><a href="#contributors" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Contributors</h2>
<p>Big thanks to everybody who contributed to this release or reported an issue!</p>
<pre><code class="hljs"><span class="hljs-meta">$</span> <span class="hljs-string">git shortlog -sn --no-merges v0.9.2..v0.9.3</span>
<span class="hljs-attr">Tomasz</span> <span class="hljs-string">Godzik</span>
<span class="hljs-attr">Scala</span> <span class="hljs-string">Steward</span>
<span class="hljs-attr">Chris</span> <span class="hljs-string">Kipp</span>
<span class="hljs-attr">Cheng</span> <span class="hljs-string">Lian</span>
<span class="hljs-attr">Vadim</span> <span class="hljs-string">Chelyshov</span>
<span class="hljs-attr">Adrien</span> <span class="hljs-string">Piquerez</span>
<span class="hljs-attr">Ayoub</span> <span class="hljs-string">Benali</span>
<span class="hljs-attr">Krzysztof</span> <span class="hljs-string">Bochenek</span>
<span class="hljs-attr">Olafur</span> <span class="hljs-string">Pall Geirsson</span>

</code></pre>
<h2><a class="anchor" aria-hidden="true" id="merged-prs"></a><a href="#merged-prs" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Merged PRs</h2>
<h2><a class="anchor" aria-hidden="true" id="v093httpsgithubcomscalametametalstreev093-2020-08-19"></a><a href="#v093httpsgithubcomscalametametalstreev093-2020-08-19" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><a href="https://github.com/scalameta/metals/tree/v0.9.3">v0.9.3</a> (2020-08-19)</h2>
<p><a href="https://github.com/scalameta/metals/compare/v0.9.2...v0.9.3">Full Changelog</a></p>
<p><strong>Merged pull requests:</strong></p>
<ul>
<li>Document how to run or debug applications
<a href="https://github.com/scalameta/metals/pull/2005">#2005</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>Properly detect semanticdb target for Scala 3
<a href="https://github.com/scalameta/metals/pull/2004">#2004</a>
(<a href="https://github.com/adpi2">adpi2</a>)</li>
<li>Add try/catch around unsafe code block.
<a href="https://github.com/scalameta/metals/pull/2002">#2002</a>
(<a href="https://github.com/olafurpg">olafurpg</a>)</li>
<li>Allow to remove all breakpoints when debugging
<a href="https://github.com/scalameta/metals/pull/1992">#1992</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>Update information about Sbt, Ammonite and worksheet support
<a href="https://github.com/scalameta/metals/pull/1994">#1994</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>Update munit, sbt-munit to 0.7.11
<a href="https://github.com/scalameta/metals/pull/2000">#2000</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Make sure we don't compile twice for open files
<a href="https://github.com/scalameta/metals/pull/1993">#1993</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>Update sbt-mdoc to 2.2.5
<a href="https://github.com/scalameta/metals/pull/2001">#2001</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Update jol-core to 0.12
<a href="https://github.com/scalameta/metals/pull/1999">#1999</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Update flyway-core to 6.5.4
<a href="https://github.com/scalameta/metals/pull/1998">#1998</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Update ammonite-util to 2.2.0
<a href="https://github.com/scalameta/metals/pull/1997">#1997</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Update jackson-databind to 2.11.2
<a href="https://github.com/scalameta/metals/pull/1996">#1996</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Update sbt-buildinfo to 0.10.0
<a href="https://github.com/scalameta/metals/pull/1995">#1995</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Add types to worksheet values
<a href="https://github.com/scalameta/metals/pull/1990">#1990</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>Allow running main classes from dependencies
<a href="https://github.com/scalameta/metals/pull/1989">#1989</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>Add support for Sbt's Scala files
<a href="https://github.com/scalameta/metals/pull/1988">#1988</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>Don't run worksheets on Scala 0.25.0 or lower
<a href="https://github.com/scalameta/metals/pull/1986">#1986</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>Fix go to defintion for Sbt's Scala sources
<a href="https://github.com/scalameta/metals/pull/1984">#1984</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>Add in a few missing docs on the extensions and commands.
<a href="https://github.com/scalameta/metals/pull/1980">#1980</a>
(<a href="https://github.com/ckipp01">ckipp01</a>)</li>
<li>Change hardcoded $(info) icon to read from ClientConfig instead.
<a href="https://github.com/scalameta/metals/pull/1982">#1982</a>
(<a href="https://github.com/ckipp01">ckipp01</a>)</li>
<li>Add support for worksheets in Scala 3
<a href="https://github.com/scalameta/metals/pull/1979">#1979</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>Simplify logic to add metals.sbt files and make sure it's tested
<a href="https://github.com/scalameta/metals/pull/1978">#1978</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>Add checking exact name to all references() invocations
<a href="https://github.com/scalameta/metals/pull/1976">#1976</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>Adjust locations returned from the presentation compiler
<a href="https://github.com/scalameta/metals/pull/1972">#1972</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>Sbt support - multiply bsp connections
<a href="https://github.com/scalameta/metals/pull/1865">#1865</a>
(<a href="https://github.com/dos65">dos65</a>)</li>
<li>Fix <code>filterText</code> value for completion item in string interpolation
<a href="https://github.com/scalameta/metals/pull/1949">#1949</a>
(<a href="https://github.com/dos65">dos65</a>)</li>
<li>Add CleanCompile to server commands documentation
<a href="https://github.com/scalameta/metals/pull/1970">#1970</a>
(<a href="https://github.com/kpbochenek">kpbochenek</a>)</li>
<li>Change implicits to Dotty syntax.
<a href="https://github.com/scalameta/metals/pull/1967">#1967</a>
(<a href="https://github.com/ckipp01">ckipp01</a>)</li>
<li>Bump recommended scalafmt version and local scalafmt version to 2.6.4
<a href="https://github.com/scalameta/metals/pull/1968">#1968</a>
(<a href="https://github.com/ckipp01">ckipp01</a>)</li>
<li>Update ammonite-util to 2.1.4-13-fb16e4e
<a href="https://github.com/scalameta/metals/pull/1955">#1955</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Update directory-watcher to 0.10.0
<a href="https://github.com/scalameta/metals/pull/1961">#1961</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Update flyway-core to 6.5.3
<a href="https://github.com/scalameta/metals/pull/1962">#1962</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Bump default mill version and also add it to BuildInfo
<a href="https://github.com/scalameta/metals/pull/1954">#1954</a>
(<a href="https://github.com/ckipp01">ckipp01</a>)</li>
<li>Update sbt-munit to 0.7.10
<a href="https://github.com/scalameta/metals/pull/1964">#1964</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Update jol-core to 0.11
<a href="https://github.com/scalameta/metals/pull/1963">#1963</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Update ammonite-runner to 0.3.0
<a href="https://github.com/scalameta/metals/pull/1960">#1960</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Update coursier to 2.0.0-RC6-24
<a href="https://github.com/scalameta/metals/pull/1959">#1959</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Update ujson to 1.2.0 <a href="https://github.com/scalameta/metals/pull/1958">#1958</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Update requests to 0.6.5
<a href="https://github.com/scalameta/metals/pull/1957">#1957</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Update pprint to 0.6.0 <a href="https://github.com/scalameta/metals/pull/1956">#1956</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Update Bloop version to support broken workspaces
<a href="https://github.com/scalameta/metals/pull/1953">#1953</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>Update Scala 3 version to 0.26.0-RC1
<a href="https://github.com/scalameta/metals/pull/1951">#1951</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>Enable BuildInfo for mtags3
<a href="https://github.com/scalameta/metals/pull/1950">#1950</a>
(<a href="https://github.com/ckipp01">ckipp01</a>)</li>
<li>Fix duplicated code actions
<a href="https://github.com/scalameta/metals/pull/1947">#1947</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>Fix enableStripMargin setting
<a href="https://github.com/scalameta/metals/pull/1946">#1946</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>Mark BillLspSuite.automatic-reconnect as flaky
<a href="https://github.com/scalameta/metals/pull/1942">#1942</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>Add more documentation about worksheets.
<a href="https://github.com/scalameta/metals/pull/1945">#1945</a>
(<a href="https://github.com/ckipp01">ckipp01</a>)</li>
<li>Add in blog post about configuring Metals.
<a href="https://github.com/scalameta/metals/pull/1940">#1940</a>
(<a href="https://github.com/ckipp01">ckipp01</a>)</li>
<li>Add in , as a trigger for SignatureHelp.
<a href="https://github.com/scalameta/metals/pull/1944">#1944</a>
(<a href="https://github.com/ckipp01">ckipp01</a>)</li>
<li>Update to Scala 3 to 0.25.0 version
<a href="https://github.com/scalameta/metals/pull/1939">#1939</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>Add -Ximport-suggestion-timeout 0 to the presentation compiler options
<a href="https://github.com/scalameta/metals/pull/1938">#1938</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>Add missing docs and move versions to a more prominent location.
<a href="https://github.com/scalameta/metals/pull/1934">#1934</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>Take into account server property in statusBarState
<a href="https://github.com/scalameta/metals/pull/1937">#1937</a>
(<a href="https://github.com/ayoub-benali">ayoub-benali</a>)</li>
<li>Update organize-imports to 0.4.0
<a href="https://github.com/scalameta/metals/pull/1933">#1933</a>
(<a href="https://github.com/liancheng">liancheng</a>)</li>
<li>Add Bloop jvmopts in tests to limit memory used by it
<a href="https://github.com/scalameta/metals/pull/1930">#1930</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>Make sure a file exists when searching for definition
<a href="https://github.com/scalameta/metals/pull/1929">#1929</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>Reverting &quot;Update interface to 0.0.24 (#1918)&quot;
<a href="https://github.com/scalameta/metals/pull/1928">#1928</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>Add additional warn-unused flags
<a href="https://github.com/scalameta/metals/pull/1911">#1911</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>Add release notes for Metals 0.9.2
<a href="https://github.com/scalameta/metals/pull/1915">#1915</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
</ul>
</span></div></article></div><div class="post"><header class="postHeader"><h1 class="postHeaderTitle"><a href="/metals/blog/2020/07/23/configuring-a-client.html">A Dive into Configuring Metals</a></h1><p class="post-meta">July 23, 2020</p><div class="authorBlock"><p class="post-authorName"><a href="https://twitter.com/ckipp01" target="_blank" rel="noreferrer noopener">Chris Kipp</a></p><div class="authorPhoto"><a href="https://twitter.com/ckipp01" target="_blank" rel="noreferrer noopener"><img src="https://avatars1.githubusercontent.com/u/13974112?s=400&amp;u=7b6a2ddab8eec6f99e4e40ae9b81f71cb5ba92e5&amp;v=4" alt="Chris Kipp"/></a></div></div></header><article class="post-content"><div><span><p>As of this last Metals release, it's now 100% possible to fully configure Metals
without any need to pass in server properties. Depending on your editor of
choice, the process to configure Metals may be completely abstracted away. You
simply click install, wait a bit, and start coding. In this post I'd like to
talk a bit about the progression of how Metals was originally configured fully
with server properties and how it can now be fully configured via the client,
which in <a href="https://microsoft.github.io/language-server-protocol/">LSP</a> terms is
your editor. This can serve both as a guide for those client extension
maintainers out there and also those curious at how Metals correctly works for
all the various editors.</p>
<h2><a class="anchor" aria-hidden="true" id="the-first-configuration"></a><a href="#the-first-configuration" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>The first configuration</h2>
<p>Looking back to the Fall of 2018, you see a giant glimpse of Metals becoming
what it is today when looking at a giant commit by
<a href="https://twitter.com/olafurpg">@olafurpg</a> with the title <a href="https://github.com/scalameta/metals/commit/df6b41acaad1978ffd1fa25c41909c38425932ab">Implement pretty
basic language server and build
client.</a>.
It's a pretty fascinating commit to look at if you're interested in the
beginnings of Metals, but I want to focus in on a specific file that still exists
today, which is the
<a href="https://github.com/scalameta/metals/commit/df6b41acaad1978ffd1fa25c41909c38425932ab#diff-dc72b5c684177c884881164ab17182eb">MetalsServerConfig.scala</a>.
In this file you see the first configuration options that existed for Metals.
You see things like <code>isLogShowMessage</code> to ensure users were correctly getting
status messages instead of everything just going into the logs. (This was also
before
<a href="https://scalameta.org/metals/docs/editors/new-editor.html#metalsstatus"><code>metals/status</code></a>
existed which is used today for a better status experience in Metals). You also
see other options like <code>isHttpEnabled</code> for Metals to start the Doctor for those
that needed an HTTP client interface, or even an <code>icons</code> setting to ensure
things looked nice and matched your client. At this point, instead of just
having the user specify every one of these when they bootstrapped the server, a
<code>metals.client</code> property was introduced that we could give editors a set of
defaults. Here is an example for the first settings for Vim and Metals using the
<a href="https://github.com/natebosch/vim-lsc">vim-lsc</a> plugin:</p>
<pre><code class="hljs css language-scala"><span class="hljs-type">System</span>.getProperty(<span class="hljs-string">"metals.client"</span>, <span class="hljs-string">"unknown"</span>) <span class="hljs-keyword">match</span> {
  <span class="hljs-keyword">case</span> <span class="hljs-string">"vim-lsc"</span> =&gt;
    <span class="hljs-type">MetalsServerConfig</span>().copy(
      isExtensionsEnabled = <span class="hljs-literal">false</span>,
      fileWatcher = <span class="hljs-type">FileWatcherConfig</span>.auto,
      isLogStatusBar = <span class="hljs-literal">true</span>,
      isNoInitialized = <span class="hljs-literal">true</span>,
      isHttpEnabled = <span class="hljs-literal">true</span>,
      icons = <span class="hljs-type">Icons</span>.unicode
    )
  ...
</code></pre>
<p>The property would then be set when the user would bootstrap Metals. This
started out as a manual process for almost all the editors utilizing
<a href="https://github.com/coursier/coursier">Coursier</a>. This still actually remains a
valid way to configure Metals, although not recommended if your client supports
setting <code>InitializationOptions</code> in the
<a href="https://microsoft.github.io/language-server-protocol/specifications/specification-current/#initialize"><code>initalize</code></a>
request. It's also almost the identical process that happens behind the scenes
when client extensions like
<a href="https://github.com/scalameta/metals-vscode">metals-vscode</a>,
<a href="https://github.com/scalameta/coc-metals">coc-metals</a>, and
<a href="https://github.com/scalameta/metals-sublime">metals-sublime</a> bootstrap the
server for you. For example, here is how you would manually do this:</p>
<pre><code class="hljs css language-sh">coursier bootstrap \
  --java-opt -Xss4m \
  --java-opt -Xms100m \
  --java-opt -Dmetals.client=emacs \
  org.scalameta:metals_2.12:0.9.2 \
  -r bintray:scalacenter/releases \
  -r sonatype:snapshots \
  -o /usr/<span class="hljs-built_in">local</span>/bin/metals-emacs -f
</code></pre>
<p>In the above example, you would then get the defaults specified in
<code>MetalsServerConfig.scala</code> for <code>emacs</code>. Again, when the process is automated
it's very similar, and you can see this if you poke around the
<a href="https://github.com/scalameta/metals-vscode/blob/master/src/extension.ts#L166"><code>fetchAndLaunchMetals</code></a>
function in the VS-Code extension. You can see how the path to Coursier is
grabbed, your <code>JAVA_HOME</code> is captured, and how we get some extra
variables/properties to call Metals with.</p>
<h2><a class="anchor" aria-hidden="true" id="user-configuration"></a><a href="#user-configuration" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>User configuration</h2>
<p>Apart from server properties, it was also necessary for users to be able to
easily change a setting, even while in the editor. For example, we have a
current setting <code>metals.superMethodLensesEnabled</code> which when enabled will
display a code lens that when invoked will either go to the parent class
containing the definition of the method or symbol or display the full method
hierarchy allowing you to choose where to go.</p>
<p>Here is an example of what this looks like in Vim:
<img src="https://i.imgur.com/rEvhzG1.png" alt="Super Method Hierarchy"></p>
<p>This feature is actually turned off by default since in very large code bases
you may experience a lag. So if a user wanted to turn this on, it wouldn't be a
great user experience to have to re-bootstrap the server to enable this feature.
This is where the User Configuration comes into play by being able to change a
configuration value and notify the server via
<a href="https://microsoft.github.io/language-server-protocol/specification#workspace_didChangeConfiguration"><code>workspace/didChangeConfiguration</code></a>.
This can fully happen for most of the user configuration values without any need
to restart the server. You can see the first configuration options added this
way in <a href="https://github.com/scalameta/metals/commit/f4706ec75afb9bf797e3144f4a0e91bb0b186e07">this
commit</a>
where the ability to define your <code>JAVA_HOME</code> was added. With now allowing for
user configurations in Metals, this allowed for an even more customized
experience.</p>
<h2><a class="anchor" aria-hidden="true" id="experimental"></a><a href="#experimental" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Experimental</h2>
<p>Being able to customize the server with properties and allowing users to pass in
some configuration values worked great. However, once Metals started creating
LSP extensions for functionality that wasn't supported fully just by LSP, then a
way was needed for the client to express that it supported these extensions.
This is when Metals started to use the
<a href="https://microsoft.github.io/language-server-protocol/specifications/specification-current/#initialize"><code>ClientCapabilities.experimental</code></a>
field which the client needed to declare support the extension. You can see the
first inklings of this when the <a href="https://scalameta.org/metals/docs/editors/tree-view-protocol.html">Tree View
Protocol</a> was
introduced <a href="https://github.com/scalameta/metals/commit/a55a2413ef10237c8510eb707c0de0cd03b83d85#diff-f8c05eebbf12c9c21a7d568f09b500ea">here in this
commit</a>.
This then continued to be further expanded as we introduced more extensions.</p>
<p>As it became easier for various clients to set this, we slowly <a href="https://github.com/scalameta/metals/pull/1414">started to
migrate</a> other options that could
only be previously set via server properties to
<code>ClientCapabilities.experimental</code>. So settings like which format you'd like the
Doctor to return could now be set directly by the client without need to
bootstrap the server with a specific property. This allowed for much easier
configuration than was previously had.</p>
<h2><a class="anchor" aria-hidden="true" id="initializationoptions"></a><a href="#initializationoptions" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>InitializationOptions</h2>
<p>Once it was clear that configuring Metals via the client was desirable, a closer
look was taken at <code>InitializationOptions</code> that can be passed in during the
<a href="https://microsoft.github.io/language-server-protocol/specifications/specification-current/#initialize"><code>initialize</code></a>
request. Since any value is able to be passed in this way, a decision was made
to fully migrate all the possible settings that were previously set as server
properties (except a select few that we'll touch on later), and also move all
the of settings that could be set under <code>experimental</code> to
<code>InitializationOptions</code> as well. This ultimately allows for clients to fully
configured Metals via <code>InitializationOptions</code> without the need to set any server
properties. In theory this also meant that you could not use the same Metals
executable for VS Code, Vim, or Emacs since the server is fully being configured
by the client itself. The current settings that can be passed in and their
defaults are explained in detail <a href="https://scalameta.org/metals/docs/editors/new-editor.html#initializationoptions">here on the
website</a>,
but the interface is as follows:</p>
<pre><code class="hljs css language-typescript"><span class="hljs-keyword">interface</span> MetalsInitializationOptions {
  compilerOptions?: CompilerInitializationOptions;
  debuggingProvider?: <span class="hljs-built_in">boolean</span>;
  decorationProvider?: <span class="hljs-built_in">boolean</span>;
  didFocusProvider?: <span class="hljs-built_in">boolean</span>;
  doctorProvider?: <span class="hljs-string">"json"</span> | <span class="hljs-string">"html"</span>;
  executeClientCommandProvider?: <span class="hljs-built_in">boolean</span>;
  globSyntax?: <span class="hljs-string">"vscode"</span> | <span class="hljs-string">"uri"</span>;
  icons?: <span class="hljs-string">"vscode"</span> | <span class="hljs-string">"octicons"</span> | <span class="hljs-string">"atom"</span> | <span class="hljs-string">"unicode"</span>;
  inputBoxProvider?: <span class="hljs-built_in">boolean</span>;
  isExitOnShutdown?: <span class="hljs-built_in">boolean</span>;
  isHttpEnabled?: <span class="hljs-built_in">boolean</span>;
  openFilesOnRenameProvider?: <span class="hljs-built_in">boolean</span>;
  quickPickProvider?: <span class="hljs-built_in">boolean</span>;
  renameFileThreshold?: <span class="hljs-built_in">number</span>;
  slowTaskProvider?: <span class="hljs-built_in">boolean</span>;
  statusBarProvider?: <span class="hljs-string">"on"</span> | <span class="hljs-string">"off"</span> | <span class="hljs-string">"log-message"</span> | <span class="hljs-string">"show-message"</span>;
  treeViewProvider?: <span class="hljs-built_in">boolean</span>;
  openNewWindowProvider?: <span class="hljs-built_in">boolean</span>;
}
</code></pre>
<pre><code class="hljs css language-typescript"><span class="hljs-keyword">interface</span> CompilerInitializationOptions {
  completionCommand?: <span class="hljs-built_in">string</span>;
  isCompletionItemDetailEnabled?: <span class="hljs-built_in">boolean</span>;
  isCompletionItemDocumentationEnabled?: <span class="hljs-built_in">boolean</span>;
  isCompletionItemResolve?: <span class="hljs-built_in">boolean</span>;
  isHoverDocumentationEnabled?: <span class="hljs-built_in">boolean</span>;
  isSignatureHelpDocumentationEnabled?: <span class="hljs-built_in">boolean</span>;
  overrideDefFormat?: <span class="hljs-string">"ascii"</span> | <span class="hljs-string">"unicode"</span>;
  parameterHintsCommand?: <span class="hljs-built_in">string</span>;
  snippetAutoIndent?: <span class="hljs-built_in">boolean</span>;
}
</code></pre>
<p>You'll notice that this allows for a much finer grained configuration if the
client chooses to set certain values. Everything from whether or not the Scala
Presentation Compiler should populate the <code>SignatureHelp.documentation</code> to
whether or not the editor supports opening a new window after using the
<code>metals.new-scala-project</code> command can now be easily configured. Fully
configuring Metals through <code>InitializationOptions</code> is now the recommended way to
configure Metals.</p>
<h2><a class="anchor" aria-hidden="true" id="are-there-still-server-properties"></a><a href="#are-there-still-server-properties" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Are there still server properties?</h2>
<p>While all of the old server properties still exist for Metals, it's no longer
recommended to use them to configure Metals. However, there are still a few
server properties that remain only server properties since they are not meant to
be widely used, and aren't exactly recommended to use for the average user. You
can see an up to date list of these <a href="https://scalameta.org/metals/docs/editors/new-editor.html#metals-server-properties">here on the
website</a>
and what functionality they provide.</p>
<h2><a class="anchor" aria-hidden="true" id="conclusion"></a><a href="#conclusion" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Conclusion</h2>
<p>As of Metals 0.9.2 it's fully possibly for all clients to use a default
bootstrapped Metals that can fully be configured via <code>InitializationOptions</code>.
There is a freshly updated <a href="https://scalameta.org/metals/docs/editors/new-editor.html">Integrating a new
editor</a> section on
the website to help explain how to exactly configure a client for usage with
Metals. As always, don't hesitate to reach out on any of the various channels
located in the footer or submit an issue to either improve documentation or to
log a bug. Also as a reminder, there is a separate repo for
<a href="https://github.com/scalameta/metals-feature-requests">metals-feature-requests</a>.</p>
<p>Happy coding with Metals!</p>
</span></div></article></div><div class="post"><header class="postHeader"><h1 class="postHeaderTitle"><a href="/metals/blog/2020/07/15/lithium.html">Metals v0.9.2 - Lithium</a></h1><p class="post-meta">July 15, 2020</p><div class="authorBlock"><p class="post-authorName"><a href="https://twitter.com/TomekGodzik" target="_blank" rel="noreferrer noopener">Tomasz Godzik</a></p><div class="authorPhoto"><a href="https://twitter.com/TomekGodzik" target="_blank" rel="noreferrer noopener"><img src="https://github.com/tgodzik.png" alt="Tomasz Godzik"/></a></div></div></header><article class="post-content"><div><span><p>We're happy to announce the release of Metals v0.9.2, which mostly adds support
for Scala 2.12.12.</p>
<table>
<tbody>
  <tr>
    <td>Commits since last release</td>
    <td align="center">50</td>
  </tr>
  <tr>
    <td>Merged PRs</td>
    <td align="center">24</td>
  </tr>
    <tr>
    <td>Contributors</td>
    <td align="center">6</td>
  </tr>
  <tr>
    <td>Closed issues</td>
    <td align="center">14</td>
  </tr>
  <tr>
    <td>New features</td>
    <td align="center">2</td>
  </tr>
</tbody>
</table>
<p>For full details: <a href="https://github.com/scalameta/metals/milestone/25?closed=1">https://github.com/scalameta/metals/milestone/25?closed=1</a></p>
<p>Metals is a language server for Scala that works with VS Code, Vim, Emacs,
Sublime Text, Atom and Eclipse. Metals is developed at the
<a href="https://scala.epfl.ch/">Scala Center</a> and <a href="https://virtuslab.com">VirtusLab</a>
with the help from <a href="https://lunatech.com">Lunatech</a> along with contributors from
the community.</p>
<h2><a class="anchor" aria-hidden="true" id="tldr"></a><a href="#tldr" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>TL;DR</h2>
<p>Check out <a href="https://scalameta.org/metals/">https://scalameta.org/metals/</a>, and
give Metals a try!</p>
<ul>
<li>Scala 2.12.12 support</li>
<li>Reset notifications popup</li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="reset-notifications-popup"></a><a href="#reset-notifications-popup" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Reset notifications popup</h2>
<p>Previously, when either a build tool was chosen for a workspace or the build
import notification was dismissed the only way to revert that choice was to
delete the <code>.metals</code> directory. In this release we added two different ways to
reset it:</p>
<ul>
<li>via a new button available in the doctor (Visual Studio Code):</li>
</ul>
<p><img src="https://i.imgur.com/Vz3vMpA.png" alt="doctor"></p>
<ul>
<li>using a new command <code>metals.reset-choice</code> (other editors):</li>
</ul>
<p><img src="https://user-images.githubusercontent.com/13974112/87051515-f3d70e00-c1ff-11ea-8758-dcd2283b114a.gif" alt="command"></p>
<h2><a class="anchor" aria-hidden="true" id="miscellaneous-improvements"></a><a href="#miscellaneous-improvements" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Miscellaneous improvements</h2>
<ul>
<li>Named parameters completions fixed to work in cases where the method was
defined later in the class.</li>
<li>Add option to not add the Bloop plugin in Gradle builds. This might be useful
if you already define Bloop plugin in your workspace, otherwise it's not
recommended.</li>
<li>Find all templates from the giter8 wiki page for the New Project Provider</li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="contributors"></a><a href="#contributors" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Contributors</h2>
<p>Big thanks to everybody who contributed to this release or reported an issue!</p>
<pre><code class="hljs"><span class="hljs-meta">$</span> <span class="hljs-string">git shortlog -sn --no-merges v0.9.1..v0.9.2</span>
<span class="hljs-attr">Chris</span> <span class="hljs-string">Kipp</span>
<span class="hljs-attr">Krzysztof</span> <span class="hljs-string">Bochenek</span>
<span class="hljs-attr">Tomasz</span> <span class="hljs-string">Godzik</span>
<span class="hljs-attr">Jorge</span> <span class="hljs-string">Vicente Cantero</span>
<span class="hljs-attr">Claudio</span> <span class="hljs-string">Bley</span>
<span class="hljs-attr">Robin</span> <span class="hljs-string">Raju</span>

</code></pre>
<h2><a class="anchor" aria-hidden="true" id="merged-prs"></a><a href="#merged-prs" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Merged PRs</h2>
<h2><a class="anchor" aria-hidden="true" id="v092httpsgithubcomscalametametalstreev092-2020-07-15"></a><a href="#v092httpsgithubcomscalametametalstreev092-2020-07-15" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><a href="https://github.com/scalameta/metals/tree/v0.9.2">v0.9.2</a> (2020-07-15)</h2>
<p><a href="https://github.com/scalameta/metals/compare/v0.9.1...v0.9.2">Full Changelog</a></p>
<p><strong>Merged pull requests:</strong></p>
<ul>
<li>Update interface to 0.0.24
<a href="https://github.com/scalameta/metals/pull/1918">#1918</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Update jna, jna-platform to 5.6.0
<a href="https://github.com/scalameta/metals/pull/1920">#1920</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Update flyway-core to 6.5.1
<a href="https://github.com/scalameta/metals/pull/1921">#1921</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Update ammonite-runner to 0.2.7
<a href="https://github.com/scalameta/metals/pull/1919">#1919</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Update coursier to 2.0.0-RC6-23
<a href="https://github.com/scalameta/metals/pull/1917">#1917</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Update new-editor docs.
<a href="https://github.com/scalameta/metals/pull/1914">#1914</a>
(<a href="https://github.com/ckipp01">ckipp01</a>)</li>
<li>Add support for Scala 2.12.12
<a href="https://github.com/scalameta/metals/pull/1907">#1907</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>Bump scalafmt version up to 2.6.3.
<a href="https://github.com/scalameta/metals/pull/1910">#1910</a>
(<a href="https://github.com/ckipp01">ckipp01</a>)</li>
<li>Fix missing completionCommand
<a href="https://github.com/scalameta/metals/pull/1913">#1913</a>
(<a href="https://github.com/ckipp01">ckipp01</a>)</li>
<li>Remove remants of fastpass.
<a href="https://github.com/scalameta/metals/pull/1912">#1912</a>
(<a href="https://github.com/ckipp01">ckipp01</a>)</li>
<li>small refactoring DoctorFormat
<a href="https://github.com/scalameta/metals/pull/1906">#1906</a>
(<a href="https://github.com/kpbochenek">kpbochenek</a>)</li>
<li>Don't filter out named parameters for methods defined later in a class
<a href="https://github.com/scalameta/metals/pull/1901">#1901</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>Improve gradle-bloop integration
<a href="https://github.com/scalameta/metals/pull/1902">#1902</a>
(<a href="https://github.com/jvican">jvican</a>)</li>
<li>Migrate final properties over to <code>InitializationOptions</code>.
<a href="https://github.com/scalameta/metals/pull/1903">#1903</a>
(<a href="https://github.com/ckipp01">ckipp01</a>)</li>
<li>Remove gson runtime reflection with manual reads for configuration.
<a href="https://github.com/scalameta/metals/pull/1898">#1898</a>
(<a href="https://github.com/ckipp01">ckipp01</a>)</li>
<li>Make sure we take into account all templates from the wiki page
<a href="https://github.com/scalameta/metals/pull/1899">#1899</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>Reset notifications popup
<a href="https://github.com/scalameta/metals/pull/1897">#1897</a>
(<a href="https://github.com/kpbochenek">kpbochenek</a>)</li>
<li>Reset notifications popup
<a href="https://github.com/scalameta/metals/pull/1897">#1897</a>
(<a href="https://github.com/kpbochenek">kpbochenek</a>)</li>
<li>Document -version flag and log clientType
<a href="https://github.com/scalameta/metals/pull/1893">#1893</a>
(<a href="https://github.com/kpbochenek">kpbochenek</a>)</li>
<li>Update Vim docs and fix various typos
<a href="https://github.com/scalameta/metals/pull/1892">#1892</a>
(<a href="https://github.com/ckipp01">ckipp01</a>)</li>
<li>Fix unit test failure on Oracle JDK 8
<a href="https://github.com/scalameta/metals/pull/1888">#1888</a>
(<a href="https://github.com/robinraju">robinraju</a>)</li>
<li>Show imports in worksheet dependency example.
<a href="https://github.com/scalameta/metals/pull/1882">#1882</a>
(<a href="https://github.com/ckipp01">ckipp01</a>)</li>
<li>Add <code>--version</code> command line option
<a href="https://github.com/scalameta/metals/pull/1883">#1883</a>
(<a href="https://github.com/avdv">avdv</a>)</li>
<li>Add release notes for 0.9.1 version
<a href="https://github.com/scalameta/metals/pull/1858">#1858</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
</ul>
</span></div></article></div><div class="post"><header class="postHeader"><h1 class="postHeaderTitle"><a href="/metals/blog/2020/07/01/lithium.html">Metals v0.9.1 - Lithium</a></h1><p class="post-meta">July 1, 2020</p><div class="authorBlock"><p class="post-authorName"><a href="https://twitter.com/TomekGodzik" target="_blank" rel="noreferrer noopener">Tomasz Godzik</a></p><div class="authorPhoto"><a href="https://twitter.com/TomekGodzik" target="_blank" rel="noreferrer noopener"><img src="https://github.com/tgodzik.png" alt="Tomasz Godzik"/></a></div></div></header><article class="post-content"><div><span><p>We're happy to announce the release of Metals v0.9.1, which focused on fixing
issues with the recently released Scala 3 support, Ammonite support and a couple
of new features.</p>
<table>
<tbody>
  <tr>
    <td>Commits since last release</td>
    <td align="center">287</td>
  </tr>
  <tr>
    <td>Merged PRs</td>
    <td align="center">106</td>
  </tr>
    <tr>
    <td>Contributors</td>
    <td align="center">16</td>
  </tr>
  <tr>
    <td>Closed issues</td>
    <td align="center">49</td>
  </tr>
  <tr>
    <td>New features</td>
    <td align="center">5</td>
  </tr>
</tbody>
</table>
<p>For full details: <a href="https://github.com/scalameta/metals/milestone/24?closed=1">https://github.com/scalameta/metals/milestone/24?closed=1</a></p>
<p>Metals is a language server for Scala that works with VS Code, Vim, Emacs,
Sublime Text, Atom and Eclipse. Metals is developed at the
<a href="https://scala.epfl.ch/">Scala Center</a> and <a href="https://virtuslab.com">VirtusLab</a>
with the help from <a href="https://lunatech.com">Lunatech</a> along with contributors from
the community.</p>
<h2><a class="anchor" aria-hidden="true" id="tldr"></a><a href="#tldr" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>TL;DR</h2>
<p>Check out <a href="https://scalameta.org/metals/">https://scalameta.org/metals/</a>, and
give Metals a try!</p>
<ul>
<li>Ammonite support</li>
<li>New project provider</li>
<li>Worksheet dependency support</li>
<li>Multiline string improvements</li>
<li>Scala versions 2.13.3, 0.24.0, 0.25.0-RC2 support</li>
<li>Dropped support for Scala 0.23.0 and deprecated the 0.24.0-RC1 version.</li>
<li>Multiple build tool selection within a workspace</li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="ammonite-support"></a><a href="#ammonite-support" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Ammonite support</h2>
<p>Thanks to great work by <a href="https://github.com/alexarchambault">alexarchambault</a> we
now support <a href="https://ammonite.io">Ammonite</a> script files. Ammonite enables you
to create scripts that can easily be ran from the command line, without the
overhead of setting up a build tool while still allowing you to download and use
dependencies.</p>
<p>The support includes most of the LSP features such as diagnostics, completions,
references, go to definition, but does not include running or debugging the
scripts. This new feature works by starting an additional Ammonite BSP server
that compiles the scripts and provides additional information about them such as
Scala version or information about the added dependencies. You can change the
default JVM parameters for the server such as <code>-Xmx</code>, which will limit the used
memory in Metals settings. These can be added via your metals editor extension
using the newly created <code>metals.ammoniteJvmProperties</code> setting. The Ammonite
server can also be started and stopped manually using the new commands
<code>ammonite-start</code> and <code>ammonite-stop</code>.</p>
<p>Each of the scripts first need to be imported into the Ammonite BSP server,
which can be done manually by clicking on the pop up whenever a new script is
opened or selecting automatic import at the start, which will import any open
scripts automatically.</p>
<p>It's important to note that this is an early approach to Ammonite support, which
might still require some improvements both on the Metals and Ammonite side. You
can learn more about the new feature or join the discussion in the
<a href="https://contributors.scala-lang.org/t/ammonite-support-in-metals/4306">blogpost</a>
on the Scala contributors forum.</p>
<p>Some of the notable features of Ammonite scripts are:</p>
<ul>
<li>Import other scripts: Metals provides completions to select existing files
based on the filesystem information</li>
</ul>
<pre><code class="hljs css language-scala"><span class="hljs-comment">//main.sc</span>
<span class="hljs-keyword">import</span> $file.hello-world
<span class="hljs-keyword">val</span> greeting = hello-world.greeting

<span class="hljs-comment">//hello-world.sc</span>
<span class="hljs-keyword">val</span> greeting = <span class="hljs-string">"Hello world!"</span>
</code></pre>
<ul>
<li>Import dependencies:</li>
</ul>
<pre><code class="hljs css language-scala"><span class="hljs-keyword">import</span> $ivy.`com.lihaoyi::scalatags:<span class="hljs-number">0.7</span><span class="hljs-number">.0</span>`
<span class="hljs-keyword">import</span> scalatags.<span class="hljs-type">Text</span>.all._

<span class="hljs-keyword">val</span> rendered = div(<span class="hljs-string">"Moo"</span>).render
</code></pre>
<ul>
<li>Set Scala version:</li>
</ul>
<pre><code class="hljs css language-scala"><span class="hljs-comment">// scala $scalaVersion</span>

<span class="hljs-keyword">import</span> scala.util.<span class="hljs-type">Properties</span>

pprint.log(<span class="hljs-type">Properties</span>.releaseVersion)
</code></pre>
<p>The Scala version is independent from any build tool used in the workspace and
without specifying the exact version it will use the default Ammonite Scala
version.</p>
<p>To learn more about Ammonite please visit the documentation website at
<a href="https://ammonite.io">https://ammonite.io</a>.</p>
<h2><a class="anchor" aria-hidden="true" id="worksheet-dependency-support"></a><a href="#worksheet-dependency-support" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Worksheet dependency support</h2>
<p>In addition to Ammonite support, which will be useful to anyone interested in
Scala scripting, we've also improved the support for Metals Scala worksheets.
Thanks to the efforts of <a href="https://github.com/olafurpg">olafurpg</a> in
<a href="https://scalameta.org/mdoc/">mdoc</a>, which powers worksheets, users are now able
to import dependencies directly inside of their Scala worksheet with completions
and diagnostics working right from the start.</p>
<p><img src="https://i.imgur.com/qXgdNWM.gif" alt="worksheet-imports"></p>
<p>You can add them using the following syntax:</p>
<pre><code class="hljs"><span class="hljs-symbol">$ivy</span>.<span class="hljs-string">`organisation::artifact:version`</span>
</code></pre>
<p>For example:</p>
<pre><code class="hljs">$ivy.`com.lihaoyi::scalatags:<span class="hljs-number">0.9</span><span class="hljs-number">.0</span>`
</code></pre>
<p><code>::</code> is the same as <code>%%</code> in sbt, which will append the current Scala binary
version to the artifact name.</p>
<h2><a class="anchor" aria-hidden="true" id="new-project-provider"></a><a href="#new-project-provider" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>New project provider</h2>
<p>Creating new Scala projects is usually a bit of work to get started, which is a
problem for both beginners and experts alike. Normally you don't want to spend a
lot of time figuring out the best setup for starting with a new technology or
the language itself.</p>
<p>There are great tools like <a href="http://www.foundweekends.org/giter8/">giter8</a>, which
is used in the <code>sbt new</code> command, that enables people to use already existing
Scala templates found on Github such as
<a href="https://github.com/scala/scala-seed.g8">https://github.com/scala/scala-seed.g8</a>.
The problem is when you don't use sbt or you don't know the exact template you
want to use.</p>
<p>To address this, we've added an additional command called <code>New Scala Project</code>
that enables users to reuse the same mechanism from the comfort of your editor.
Firstly, you can choose from existing templates, either curated by the Metals
team, ones existing on the giter8
<a href="https://github.com/foundweekends/giter8/wiki/giter8-templates">wiki page</a> or
alternatively an entirely custom template. Then you can choose the exact
location for the new project and the name. Afterwards, Metals will run giter8 to
create the project and offer to open that new project.</p>
<p><img src="https://user-images.githubusercontent.com/3807253/81842954-2d1b3680-954d-11ea-934a-96fe53cafeb9.gif" alt="new-project"></p>
<p>The command is also available as a button in the welcome view of the Visual
Studio Code Metals extension, which means it will be visible in case there are
no imported projects in the current workspace.</p>
<p>The first curated templates were chosen by the team, however we are happy to
include more so that it's easier for people to discover new amazing libraries or
frameworks.</p>
<h2><a class="anchor" aria-hidden="true" id="multiline-string-improvements"></a><a href="#multiline-string-improvements" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Multiline string improvements</h2>
<p>There are two new quality of life improvements when it comes to multiline
strings. Firstly, thanks to <a href="https://github.com/mlachkar">mlachkar</a> we now
automatically add <code>stripMargin</code> method invocation when using newline in a
multiline string if that string uses <code>|</code> and has no existing <code>stripMargin</code>:</p>
<p><img src="https://i.imgur.com/Z2Q1glN.gif" alt="strip-margin"></p>
<p>This behaviour can be disabled in Metals settings using
<code>metals.enableStripMarginOnTypeFormatting</code>.</p>
<p>Another useful improvement coming from <a href="https://github.com/colineto">colineto</a>
is a new code action that can easily convert single string into the traditional
multiline string with <code>|</code> and <code>stripMargin</code> at the end:</p>
<p><img src="https://i.imgur.com/5ohRcl9.gif" alt="new-action"></p>
<h2><a class="anchor" aria-hidden="true" id="multiple-workspace-build-tools-selection"></a><a href="#multiple-workspace-build-tools-selection" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Multiple workspace build tools selection</h2>
<p>Previously, Metals would only pick up a single build tool in a workspace even if
in reality there were multiple available ones. To help with that we added a
prompt to choose the desired build tool in workspaces with multiple build files.</p>
<p>An example situation where this is needed is when you have a project with both a
<code>build.sbt</code> and <code>build.sc</code>, but the <code>build.sc</code> is what you use for your build
definition. Previously if both were detected, it was automatically considered an
Sbt workspace, however now it's possible to choose.</p>
<p><img src="https://i.imgur.com/pAgZK7u.gif" alt="multiple-build-tool"></p>
<p>In case of multiple build tools in single workspace you can see which one was
used to import project in 'Metals Doctor' view. If you choose the wrong one, or
change the main build tool later on, you'll need to remove the .metals/
directory to reset the decisions.</p>
<p>This great new feature was contributed by <a href="https://github.com/ckipp01">ckipp01</a>!</p>
<h2><a class="anchor" aria-hidden="true" id="miscellaneous-improvements"></a><a href="#miscellaneous-improvements" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Miscellaneous improvements</h2>
<ul>
<li>Fix run/debug in Maven workspaces.</li>
<li>Always run newest sbt version if none is specified.</li>
<li>Fix find references for Scala 3 on Windows.</li>
<li>Pick jvm targets with higher priority when using run/debug without specifying
the exact build target.</li>
<li>Make breakpoints work properly in Scala 3 and in case of nested classes.</li>
<li>Exhaustive pattern matching in the case of sealed upper bound types.</li>
<li>Compile before renaming instead of showing an error.</li>
<li>Fix issue with symlinked source directories.</li>
<li>Fix missing references for synthetic companion objects.</li>
<li>Automatically add -J if it doesn't already exist to java properties when
running or debugging.</li>
<li>Fix go to definition for JDK 11 library sources.</li>
<li>Keep modifiers when implementing abstract members.</li>
<li>Fix auto imports position when using package objects and multiple package
definitions.</li>
<li>Fix issues in files with Scala 2.13 specific syntax like for example
underscore numeric literals (<code>val num = 100_000</code>).</li>
<li>Always run Mill in interactive mode.</li>
<li>Improvements to hover in Scala 3 files.</li>
<li>Make sure auto imports are correct for Ammonite scripts</li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="contributors"></a><a href="#contributors" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Contributors</h2>
<p>Big thanks to everybody who contributed to this release or reported an issue!</p>
<pre><code class="hljs"><span class="hljs-meta">$</span> <span class="hljs-string">git shortlog -sn --no-merges v0.9.0..v0.9.1</span>
<span class="hljs-attr">Tomasz</span> <span class="hljs-string">Godzik</span>
<span class="hljs-attr">Scala</span> <span class="hljs-string">Steward</span>
<span class="hljs-attr">Alexandre</span> <span class="hljs-string">Archambault</span>
<span class="hljs-attr">Chris</span> <span class="hljs-string">Kipp</span>
<span class="hljs-meta">Łukasz</span> <span class="hljs-string">Trojanowski</span>
<span class="hljs-attr">Coline</span> <span class="hljs-string">Thomas</span>
<span class="hljs-attr">Krzysztof</span> <span class="hljs-string">Bochenek</span>
<span class="hljs-attr">Meriam</span> <span class="hljs-string">Lachkar</span>
<span class="hljs-attr">bettyblue</span>
<span class="hljs-attr">Daniel</span> <span class="hljs-string">King</span>
<span class="hljs-attr">Naoki</span> <span class="hljs-string">Takezoe</span>
<span class="hljs-attr">Olafur</span> <span class="hljs-string">Pall Geirsson</span>
<span class="hljs-attr">Win</span> <span class="hljs-string">Wang</span>
<span class="hljs-attr">Martin</span> <span class="hljs-string">Duhem</span>
<span class="hljs-attr">ag91</span>
<span class="hljs-attr">faizk</span>
<span class="hljs-meta">Łukasz</span> <span class="hljs-string">Wawrzyk</span>

</code></pre>
<h2><a class="anchor" aria-hidden="true" id="merged-prs"></a><a href="#merged-prs" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Merged PRs</h2>
<h2><a class="anchor" aria-hidden="true" id="v091httpsgithubcomscalametametalstreev091-2020-07-01"></a><a href="#v091httpsgithubcomscalametametalstreev091-2020-07-01" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><a href="https://github.com/scalameta/metals/tree/v0.9.1">v0.9.1</a> (2020-07-01)</h2>
<p><a href="https://github.com/scalameta/metals/compare/v0.9.0...v0.9.1">Full Changelog</a></p>
<p><strong>Merged pull requests:</strong></p>
<ul>
<li>Add support for Scala 2.13.3
<a href="https://github.com/scalameta/metals/pull/1857">#1857</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>Update scalafmt-dynamic to 2.6.1
<a href="https://github.com/scalameta/metals/pull/1879">#1879</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Update sbt-mdoc to 2.2.3
<a href="https://github.com/scalameta/metals/pull/1878">#1878</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Update ipcsocket to 1.1.0
<a href="https://github.com/scalameta/metals/pull/1877">#1877</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Update sbt, scripted-plugin to 1.3.13
<a href="https://github.com/scalameta/metals/pull/1876">#1876</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Update flyway-core to 6.5.0
<a href="https://github.com/scalameta/metals/pull/1875">#1875</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Update jackson-databind to 2.11.1
<a href="https://github.com/scalameta/metals/pull/1873">#1873</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Ensure the edit positions are correct for autoImports with Ammonite.
<a href="https://github.com/scalameta/metals/pull/1871">#1871</a>
(<a href="https://github.com/ckipp01">ckipp01</a>)</li>
<li>Add in a preparePr alias.
<a href="https://github.com/scalameta/metals/pull/1867">#1867</a>
(<a href="https://github.com/ckipp01">ckipp01</a>)</li>
<li>Bump default mill version
<a href="https://github.com/scalameta/metals/pull/1861">#1861</a>
(<a href="https://github.com/ckipp01">ckipp01</a>)</li>
<li>Update mdoc to 2.2.3 and power completions with worksheet's classpath
<a href="https://github.com/scalameta/metals/pull/1856">#1856</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>Add jvm parameters configuration for Ammonite
<a href="https://github.com/scalameta/metals/pull/1853">#1853</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>Remove fastpass command line tool
<a href="https://github.com/scalameta/metals/pull/1833">#1833</a>
(<a href="https://github.com/olafurpg">olafurpg</a>)</li>
<li>Update Bloop to fix issues when using run/debug in Maven workspaces
<a href="https://github.com/scalameta/metals/pull/1850">#1850</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>Added completions for $file in ammonite scripts
<a href="https://github.com/scalameta/metals/pull/1846">#1846</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>Bump scalafmt up to 2.6.1
<a href="https://github.com/scalameta/metals/pull/1847">#1847</a>
(<a href="https://github.com/ckipp01">ckipp01</a>)</li>
<li>In case of no defined sbt version run bloopInstall with the newest one
<a href="https://github.com/scalameta/metals/pull/1843">#1843</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>Bump up the scalafmt version for the codebase
<a href="https://github.com/scalameta/metals/pull/1840">#1840</a>
(<a href="https://github.com/ckipp01">ckipp01</a>)</li>
<li>Fix adding unmanaged source directories for mtags3
<a href="https://github.com/scalameta/metals/pull/1842">#1842</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>Remove extra nested scala directory under <code>scala-3</code>
<a href="https://github.com/scalameta/metals/pull/1841">#1841</a>
(<a href="https://github.com/ckipp01">ckipp01</a>)</li>
<li>Update dotty to 0.25.0-RC-2 and 0.24.0
<a href="https://github.com/scalameta/metals/pull/1839">#1839</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>Add in explicit <code>TextDocumentSyncOptions</code>.
<a href="https://github.com/scalameta/metals/pull/1837">#1837</a>
(<a href="https://github.com/ckipp01">ckipp01</a>)</li>
<li>Changes for decorationProvider if <code>isHttpEnabled</code> is true.
<a href="https://github.com/scalameta/metals/pull/1834">#1834</a>
(<a href="https://github.com/ckipp01">ckipp01</a>)</li>
<li>Add in spacing in vscode icons only.
<a href="https://github.com/scalameta/metals/pull/1832">#1832</a>
(<a href="https://github.com/ckipp01">ckipp01</a>)</li>
<li>Update sbt-munit to 0.7.9
<a href="https://github.com/scalameta/metals/pull/1828">#1828</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Use g8 templates to provide &quot;New Scala Project&quot;
<a href="https://github.com/scalameta/metals/pull/1728">#1728</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>Update coursier to 2.0.0-RC6-21
<a href="https://github.com/scalameta/metals/pull/1822">#1822</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Mark ammonite suites flaky
<a href="https://github.com/scalameta/metals/pull/1830">#1830</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>Update flyway-core to 6.4.4
<a href="https://github.com/scalameta/metals/pull/1825">#1825</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Update undertow-core to 2.1.3.Final
<a href="https://github.com/scalameta/metals/pull/1824">#1824</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Update sbt-native-packager to 1.7.3
<a href="https://github.com/scalameta/metals/pull/1821">#1821</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Update scalameta, semanticdb-scalac, ... to 4.3.15
<a href="https://github.com/scalameta/metals/pull/1829">#1829</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Update sbt-mdoc to 2.2.2
<a href="https://github.com/scalameta/metals/pull/1827">#1827</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Update ammonite-runner to 0.2.5
<a href="https://github.com/scalameta/metals/pull/1823">#1823</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Update sbt-scalafix to 0.9.17
<a href="https://github.com/scalameta/metals/pull/1820">#1820</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Update ammonite to fix issues with file watching
<a href="https://github.com/scalameta/metals/pull/1819">#1819</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>Fix issues with semanticdb on windows
<a href="https://github.com/scalameta/metals/pull/1818">#1818</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>Update directories to 12
<a href="https://github.com/scalameta/metals/pull/1813">#1813</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>Pick the most valued build target instead of least for running or debugging
<a href="https://github.com/scalameta/metals/pull/1811">#1811</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>Add support for breakpoints in toplevel methods in Dotty
<a href="https://github.com/scalameta/metals/pull/1808">#1808</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>Allow for exhaustive pattern matching in case of sealed upper bound types
<a href="https://github.com/scalameta/metals/pull/1787">#1787</a>
(<a href="https://github.com/ltrojanowski">ltrojanowski</a>)</li>
<li>compile before rename instead of checking if compilation is not ongoing
<a href="https://github.com/scalameta/metals/pull/1754">#1754</a>
(<a href="https://github.com/ltrojanowski">ltrojanowski</a>)</li>
<li>Bug-fix: onTypeFormatting is adding .stripMargin even if it's present
<a href="https://github.com/scalameta/metals/pull/1806">#1806</a>
(<a href="https://github.com/mlachkar">mlachkar</a>)</li>
<li>Fix ammonite suite flakiness
<a href="https://github.com/scalameta/metals/pull/1803">#1803</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>Use parser for detecting enclosing class for a breakpoint
<a href="https://github.com/scalameta/metals/pull/1783">#1783</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>Update nuprocess to 2.0.1
<a href="https://github.com/scalameta/metals/pull/1792">#1792</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Fix issues with symlinks in source directories
<a href="https://github.com/scalameta/metals/pull/1784">#1784</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>Update undertow-core to 2.1.1.Final
<a href="https://github.com/scalameta/metals/pull/1794">#1794</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Update jackson-databind to 2.11.0
<a href="https://github.com/scalameta/metals/pull/1790">#1790</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Update xnio-nio to 3.8.1.Final
<a href="https://github.com/scalameta/metals/pull/1796">#1796</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Update scalameta, semanticdb-scalac, ... to 4.3.13
<a href="https://github.com/scalameta/metals/pull/1800">#1800</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Update sbt, scripted-plugin to 1.3.12
<a href="https://github.com/scalameta/metals/pull/1797">#1797</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Update coursier to 2.0.0-RC6-19
<a href="https://github.com/scalameta/metals/pull/1793">#1793</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Update scalafmt-dynamic to 2.5.3
<a href="https://github.com/scalameta/metals/pull/1799">#1799</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Update flyway-core to 6.4.3
<a href="https://github.com/scalameta/metals/pull/1795">#1795</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Update requests to 0.6.2
<a href="https://github.com/scalameta/metals/pull/1791">#1791</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>fix missing synthetic references
<a href="https://github.com/scalameta/metals/pull/1727">#1727</a>
(<a href="https://github.com/faizk">faizk</a>)</li>
<li>Use onTypeFormatting to create multiline string
<a href="https://github.com/scalameta/metals/pull/1753">#1753</a>
(<a href="https://github.com/mlachkar">mlachkar</a>)</li>
<li>Add in setting to vim docs to help recognize *.sc as Scala files
<a href="https://github.com/scalameta/metals/pull/1785">#1785</a>
(<a href="https://github.com/ckipp01">ckipp01</a>)</li>
<li>Automatically add -J to jvm properties and make sure run JVM targets fists
<a href="https://github.com/scalameta/metals/pull/1781">#1781</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>Make sure to persist users choice of build tool
<a href="https://github.com/scalameta/metals/pull/1779">#1779</a>
(<a href="https://github.com/ckipp01">ckipp01</a>)</li>
<li>Remove logging from ClasspathLoader
<a href="https://github.com/scalameta/metals/pull/1778">#1778</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>Organize imports with Scalafix
<a href="https://github.com/scalameta/metals/pull/1775">#1775</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>Add file watcher for the standalone ammonite scripts
<a href="https://github.com/scalameta/metals/pull/1771">#1771</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>Handle workspaces with multiple build files.
<a href="https://github.com/scalameta/metals/pull/1758">#1758</a>
(<a href="https://github.com/ckipp01">ckipp01</a>)</li>
<li>Add early support for Ammonite scripts
<a href="https://github.com/scalameta/metals/pull/1538">#1538</a>
(<a href="https://github.com/alexarchambault">alexarchambault</a>)</li>
<li>Try to fix breakpoint DAP suites
<a href="https://github.com/scalameta/metals/pull/1755">#1755</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>Support java files inside java modules for go to definition
<a href="https://github.com/scalameta/metals/pull/1763">#1763</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>Keep modifiers when implementing abstract members
<a href="https://github.com/scalameta/metals/pull/1762">#1762</a>
(<a href="https://github.com/kpbochenek">kpbochenek</a>)</li>
<li>Export Pants 3rdparty sources
<a href="https://github.com/scalameta/metals/pull/1761">#1761</a>
(<a href="https://github.com/olafurpg">olafurpg</a>)</li>
<li>Support Pants' <code>strict_deps</code>
<a href="https://github.com/scalameta/metals/pull/1716">#1716</a>
(<a href="https://github.com/Duhemm">Duhemm</a>)</li>
<li>Update coursier to 2.0.0-RC6-16
<a href="https://github.com/scalameta/metals/pull/1741">#1741</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Update sbt-scalafix to 0.9.15
<a href="https://github.com/scalameta/metals/pull/1735">#1735</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Update mdoc-interfaces, sbt-mdoc to 2.2.0
<a href="https://github.com/scalameta/metals/pull/1747">#1747</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Update sbt-dotty to 0.4.1
<a href="https://github.com/scalameta/metals/pull/1733">#1733</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Update jackson-databind to 2.9.10.4
<a href="https://github.com/scalameta/metals/pull/1736">#1736</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Update sbt-ci-release to 1.5.3
<a href="https://github.com/scalameta/metals/pull/1737">#1737</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Update requests to 0.5.2
<a href="https://github.com/scalameta/metals/pull/1738">#1738</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Update ujson to 1.1.0 <a href="https://github.com/scalameta/metals/pull/1739">#1739</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Update sbt-native-packager to 1.7.2
<a href="https://github.com/scalameta/metals/pull/1740">#1740</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Update interface to 0.0.22
<a href="https://github.com/scalameta/metals/pull/1742">#1742</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Update directory-watcher to 0.9.10
<a href="https://github.com/scalameta/metals/pull/1743">#1743</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Update undertow-core to 2.1.0.Final
<a href="https://github.com/scalameta/metals/pull/1744">#1744</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Update flyway-core to 6.4.2
<a href="https://github.com/scalameta/metals/pull/1745">#1745</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Update sbt, scripted-plugin to 1.3.10
<a href="https://github.com/scalameta/metals/pull/1746">#1746</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Update munit to 0.7.7 <a href="https://github.com/scalameta/metals/pull/1748">#1748</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Update sbt-munit to 0.7.7
<a href="https://github.com/scalameta/metals/pull/1749">#1749</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Fix CrossDefinitionLspSuite and additional logs to the DAP suites
<a href="https://github.com/scalameta/metals/pull/1731">#1731</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>Bugfix - formatting for multilines adds pipe in the wrong place
<a href="https://github.com/scalameta/metals/pull/1729">#1729</a>
(<a href="https://github.com/mlachkar">mlachkar</a>)</li>
<li>Remove the declaration of the experimental features in initialize and add
<code>ServerInfo</code> <a href="https://github.com/scalameta/metals/pull/1730">#1730</a>
(<a href="https://github.com/ckipp01">ckipp01</a>)</li>
<li>teach metals to accept configuration of range formatting
<a href="https://github.com/scalameta/metals/pull/1717">#1717</a>
(<a href="https://github.com/danking">danking</a>)</li>
<li>Bump scalafmt to 2.5.2 <a href="https://github.com/scalameta/metals/pull/1726">#1726</a>
(<a href="https://github.com/takezoe">takezoe</a>)</li>
<li>Expose fastpass metadata in .bsp/bloop.json
<a href="https://github.com/scalameta/metals/pull/1724">#1724</a>
(<a href="https://github.com/lukaszwawrzyk">lukaszwawrzyk</a>)</li>
<li>handle package object in autoImports
<a href="https://github.com/scalameta/metals/pull/1722">#1722</a>
(<a href="https://github.com/colineto">colineto</a>)</li>
<li>code action to make single string multiline with strip margin
<a href="https://github.com/scalameta/metals/pull/1685">#1685</a>
(<a href="https://github.com/colineto">colineto</a>)</li>
<li>Fix issues in files with Scala 2.13 specific syntax
<a href="https://github.com/scalameta/metals/pull/1721">#1721</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>Bump Bloop version and update fastpass to new TraceSettings
<a href="https://github.com/scalameta/metals/pull/1708">#1708</a>
(<a href="https://github.com/wiwa">wiwa</a>)</li>
<li>Try to fix Debug Adapter Suites
<a href="https://github.com/scalameta/metals/pull/1625">#1625</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>Fix behavir when the format dialog is closed without choosing action
<a href="https://github.com/scalameta/metals/pull/1718">#1718</a>
(<a href="https://github.com/takezoe">takezoe</a>)</li>
<li>Always run mill in interactive mode and strip the '--mill-version'
<a href="https://github.com/scalameta/metals/pull/1715">#1715</a>
(<a href="https://github.com/meshake">meshake</a>)</li>
<li>When no build.properties is available run the recommended sbt version
<a href="https://github.com/scalameta/metals/pull/1713">#1713</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>Make sure we don't download invalid dependencies for Scala 3
<a href="https://github.com/scalameta/metals/pull/1711">#1711</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>Improve Scala 3 hover <a href="https://github.com/scalameta/metals/pull/1701">#1701</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>Add in some documentation for vim and <code>InitializationOptions</code>
<a href="https://github.com/scalameta/metals/pull/1688">#1688</a>
(<a href="https://github.com/ckipp01">ckipp01</a>)</li>
<li>Update Mill version to 0.6.2
<a href="https://github.com/scalameta/metals/pull/1702">#1702</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>Add release notes for the 0.9.0 Metals version
<a href="https://github.com/scalameta/metals/pull/1689">#1689</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
</ul>
</span></div></article></div><div class="post"><header class="postHeader"><h1 class="postHeaderTitle"><a href="/metals/blog/2020/05/04/lithium.html">Metals v0.9.0 - Lithium</a></h1><p class="post-meta">May 4, 2020</p><div class="authorBlock"><p class="post-authorName"><a href="https://twitter.com/TomekGodzik" target="_blank" rel="noreferrer noopener">Tomasz Godzik</a></p><div class="authorPhoto"><a href="https://twitter.com/TomekGodzik" target="_blank" rel="noreferrer noopener"><img src="https://github.com/tgodzik.png" alt="Tomasz Godzik"/></a></div></div></header><article class="post-content"><div><span><p>We are happy to announce the release of Metals v0.9.0, codename &quot;Lithium&quot;, which
main focus is introducing support for Scala 3 starting with versions 0.23.0 and
0.24.0-RC1. We also added support for Scala 2.13.2 and a number of other useful
improvements.</p>
<table>
<tbody>
  <tr>
    <td>Commits since last release</td>
    <td align="center">140</td>
  </tr>
  <tr>
    <td>Merged PRs</td>
    <td align="center">45</td>
  </tr>
    <tr>
    <td>Contributors</td>
    <td align="center">14</td>
  </tr>
  <tr>
    <td>Closed issues</td>
    <td align="center">9</td>
  </tr>
  <tr>
    <td>New features</td>
    <td align="center">3</td>
  </tr>
</tbody>
</table>
<p>For full details: <a href="https://github.com/scalameta/metals/milestone/13?closed=1">https://github.com/scalameta/metals/milestone/13?closed=1</a></p>
<p>Metals is a language server for Scala that works with VS Code, Vim, Emacs,
Sublime Text, Atom and Eclipse. Metals is developed at the
<a href="https://scala.epfl.ch/">Scala Center</a> and <a href="https://virtuslab.com">VirtusLab</a>
with the help from <a href="https://lunatech.com">Lunatech</a> along with contributors from
the community.</p>
<h2><a class="anchor" aria-hidden="true" id="tldr"></a><a href="#tldr" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>TL;DR</h2>
<p>Check out <a href="https://scalameta.org/metals/">https://scalameta.org/metals/</a>, and
give Metals a try!</p>
<ul>
<li>Scala 2.13.2 and basic Scala 3 support</li>
<li>Improvements to the Bloop integration</li>
<li>Automatically add '+' on newline when inside a string</li>
<li>New Code action: &quot;Import all missing symbols&quot;</li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="basic-scala-3-support"></a><a href="#basic-scala-3-support" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Basic Scala 3 support</h2>
<p>For a couple of the last months we have been working on making Metals work with
the Dotty compiler, which will become the new Scala 3. This effort included
contributions to Metals, Bloop as well as to Dotty. Thanks to the great help
from the Dotty compiler team, we now have an option to generate semanticDB files
used for our internal indexes, which allowed some features to work without any
changes to the core code. It is also important to mention that without
<a href="https://github.com/jvican">jvican</a> and his Bloop project, which already
supports Scala 3, all this would have taken a much longer time.</p>
<p>That said, there are some issues that are lacking in the Scala 3 support that
are available for 2.x versions. Most notably, we are still missing all of the
more advanced completions, filtering and sorting of completion items or auto
imports. There are also some possible issues connected to optional braces and
top level methods features. In the upcoming months we are planning to address
most of these issues and implement the lacking features.</p>
<p>You can find missing features in the
<a href="https://github.com/scalameta/metals-feature-requests/issues?q=is%3Aissue+is%3Aopen+label%3Ascala3">feature requests repository</a>
and currently known bugs in the
<a href="https://github.com/scalameta/metals/issues?q=is%3Aissue+is%3Aopen+label%3A%22Scala+3%22">main Metals repo.</a></p>
<p>The first supported versions will be <code>0.23.0</code> and <code>0.24.0-RC1</code>, which are the
latest stable and the latest release candidate respectably. We plan to always
support the latest stable and release candidate until there is a more stable
release cycle for Scala 3.</p>
<p>Please do report any issues you encounter, especially connected to some new
Scala 3 features, which will be an immense help to the team.</p>
<h2><a class="anchor" aria-hidden="true" id="improvements-related-to-bloopmetals-integration"></a><a href="#improvements-related-to-bloopmetals-integration" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Improvements related to Bloop/Metals integration</h2>
<p>There have been multiple reported issues in the last weeks about hanging
compilation, which can make the Metals workspace hard to use. Our top priority
has been figuring out all the possible issues both in Metals as well as in
Bloop. Thanks to some fixes done by <a href="https://github.com/jvican">jvican</a>, and
some work on the Metals side on the Bloop integration we're hopeful that some of
the issues are becoming less frequent. These fixes are included in this release.</p>
<p>We also reworked the Metals tree view to highlight some commands that a user can
use to fix their workspace as well as added two new commands:</p>
<ul>
<li><p><code>Clean compile workspace</code> - clean compile the whole workspace - might be
needed in case of broken compiler caches.</p></li>
<li><p><code>Restart Bloop server</code> - restart the Bloop build server, which should help
with the cases where compilation would hang.</p>
<p><img src="https://i.imgur.com/PERfNqt.png" alt="reworked-tree-view"></p></li>
</ul>
<p>Even if those commands help, do not hesitate to report any issues. We are also
monitoring the situation ourselves and investigating all problems encountered.</p>
<h2><a class="anchor" aria-hidden="true" id="automatically-add--on-newline-inside-a-string"></a><a href="#automatically-add--on-newline-inside-a-string" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Automatically add '+' on newline inside a string</h2>
<p>The Metals team was recently joined by <a href="https://github.com/mlachkar">mlachkar</a>,
an engineer from the Scala Center, who already contributed a number of features
and bug fixes to the project. Thanks to her, we can now easily enter a newline
inside a single line string and that string will be correctly split with an
additional <code>+</code>.</p>
<p><img src="https://i.imgur.com/uhF0MOx.gif" alt="split-line"></p>
<h2><a class="anchor" aria-hidden="true" id="code-action-to-import-all-missing-symbols"></a><a href="#code-action-to-import-all-missing-symbols" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Code action to import all missing symbols</h2>
<p>Previously, it was only available to import one symbol at a time in case of
missing imports. Thanks to <a href="https://github.com/colineto">colineto</a> we now have
the ability to import everything in bulk for every unambiguous import available.
Unambiguous in this case meaning that there is only one possible import to
choose from.</p>
<p><img src="https://i.imgur.com/mmzgJs7.gif" alt="import-all"></p>
<h2><a class="anchor" aria-hidden="true" id="miscellaneous-improvements"></a><a href="#miscellaneous-improvements" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Miscellaneous improvements</h2>
<ul>
<li>Added an option to ignore .scalafmt.conf creation message.</li>
<li>Fixed hanging while debugging if workspace had errors.</li>
<li>Fixed issue with folding in non 2.12.11 workspaces.</li>
<li>Turn off &quot;Go to parent&quot; code lenses by default due to performance problems in
large workspaces.</li>
<li>Fixed false parsing errors in 2.13.x workspaces.</li>
<li>Added date string to metals logs.</li>
<li>Fixed issue with additional src directories being created automatically.</li>
<li>Fixed &quot;Go to implementation&quot; to work with local aliases.</li>
<li>Fixed auto-import issue in package objects.</li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="contributors"></a><a href="#contributors" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Contributors</h2>
<p>Big thanks to everybody who contributed to this release! We had a lot of new
contributors doing some really exemplary work.</p>
<pre><code class="hljs"><span class="hljs-meta">$</span> <span class="hljs-string">git shortlog -sn --no-merges v0.8.4..v0.9.0</span>
<span class="hljs-attr">Ayoub</span> <span class="hljs-string">Benali</span>
<span class="hljs-attr">Tomasz</span> <span class="hljs-string">Godzik</span>
<span class="hljs-attr">Scala</span> <span class="hljs-string">Steward</span>
<span class="hljs-attr">Chris</span> <span class="hljs-string">Kipp</span>
<span class="hljs-attr">Coline</span> <span class="hljs-string">Thomas</span>
<span class="hljs-attr">Meriam</span> <span class="hljs-string">Lachkar</span>
<span class="hljs-attr">Win</span> <span class="hljs-string">Wang</span>
<span class="hljs-attr">Elie</span> <span class="hljs-string">Poussou</span>
<span class="hljs-attr">Krzysztof</span> <span class="hljs-string">Bochenek</span>
<span class="hljs-attr">Olafur</span> <span class="hljs-string">Pall Geirsson</span>
<span class="hljs-attr">Aleksei</span> <span class="hljs-string">Alefirov</span>
<span class="hljs-attr">Naoki</span> <span class="hljs-string">Takezoe</span>
<span class="hljs-attr">Nathaniel</span> <span class="hljs-string">Fischer</span>
<span class="hljs-attr">Tomasz</span> <span class="hljs-string">Pasternak</span>

</code></pre>
<h2><a class="anchor" aria-hidden="true" id="merged-prs"></a><a href="#merged-prs" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Merged PRs</h2>
<h2><a class="anchor" aria-hidden="true" id="v090httpsgithubcomscalametametalstreev090-2020-05-04"></a><a href="#v090httpsgithubcomscalametametalstreev090-2020-05-04" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><a href="https://github.com/scalameta/metals/tree/v0.9.0">v0.9.0</a> (2020-05-04)</h2>
<p><a href="https://github.com/scalameta/metals/compare/v0.8.4...v0.9.0">Full Changelog</a></p>
<p><strong>Merged pull requests:</strong></p>
<ul>
<li>Reworked Bloop connection and Tree View
<a href="https://github.com/scalameta/metals/pull/1677">#1677</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>fix auto import position when package object inside package
<a href="https://github.com/scalameta/metals/pull/1686">#1686</a>
(<a href="https://github.com/colineto">colineto</a>)</li>
<li>Move additional settings to InitializationOptions
<a href="https://github.com/scalameta/metals/pull/1684">#1684</a>
(<a href="https://github.com/ckipp01">ckipp01</a>)</li>
<li>Improve code lens generation time
<a href="https://github.com/scalameta/metals/pull/1679">#1679</a>
(<a href="https://github.com/kpbochenek">kpbochenek</a>)</li>
<li>Don't ask .scalafmt.conf creation again
<a href="https://github.com/scalameta/metals/pull/1607">#1607</a>
(<a href="https://github.com/takezoe">takezoe</a>)</li>
<li>Create a <code>ClientConfig</code> to contain all configuration
<a href="https://github.com/scalameta/metals/pull/1674">#1674</a>
(<a href="https://github.com/ckipp01">ckipp01</a>)</li>
<li>Handle return to line in strings in OnTypeFormatting
<a href="https://github.com/scalameta/metals/pull/1611">#1611</a>
(<a href="https://github.com/mlachkar">mlachkar</a>)</li>
<li>Bump Bloop version to check if it solves issues with hanging compilation
<a href="https://github.com/scalameta/metals/pull/1680">#1680</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>Improve rendering of Pants command errors.
<a href="https://github.com/scalameta/metals/pull/1681">#1681</a>
(<a href="https://github.com/olafurpg">olafurpg</a>)</li>
<li>Allow amending without editor prompt
<a href="https://github.com/scalameta/metals/pull/1676">#1676</a>
(<a href="https://github.com/tpasternak">tpasternak</a>)</li>
<li>Add Bloop zipkin trace debug and verbose settings
<a href="https://github.com/scalameta/metals/pull/1678">#1678</a>
(<a href="https://github.com/wiwa">wiwa</a>)</li>
<li>Update Scala 3 version to 0.23.0
<a href="https://github.com/scalameta/metals/pull/1671">#1671</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>Make sure that the workspace contains no errors when running
<a href="https://github.com/scalameta/metals/pull/1658">#1658</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>Turn off go to parent code lenses by default
<a href="https://github.com/scalameta/metals/pull/1666">#1666</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>Use DefinitionProvider instead of index in RenameProvider
<a href="https://github.com/scalameta/metals/pull/1637">#1637</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>Feature : Code action Import all missing symbols
<a href="https://github.com/scalameta/metals/pull/1652">#1652</a>
(<a href="https://github.com/coline-lunatech">coline-lunatech</a>)</li>
<li>Add support for Scala 2.13.2
<a href="https://github.com/scalameta/metals/pull/1659">#1659</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>Properly set the arguments field in sever commands documentation
<a href="https://github.com/scalameta/metals/pull/1606">#1606</a>
(<a href="https://github.com/ayoub-benali">ayoub-benali</a>)</li>
<li>Handle initialization options
<a href="https://github.com/scalameta/metals/pull/1626">#1626</a>
(<a href="https://github.com/ayoub-benali">ayoub-benali</a>)</li>
<li>Remove optimisation to reuse semanticdb jar from the classpath
<a href="https://github.com/scalameta/metals/pull/1657">#1657</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>update dialect of worksheet to scala213
<a href="https://github.com/scalameta/metals/pull/1656">#1656</a>
(<a href="https://github.com/mlachkar">mlachkar</a>)</li>
<li>Add in updated documentation for vim
<a href="https://github.com/scalameta/metals/pull/1651">#1651</a>
(<a href="https://github.com/ckipp01">ckipp01</a>)</li>
<li>Dynamically read fastpass zipkin properties from fastpass/fastpass.properties
<a href="https://github.com/scalameta/metals/pull/1655">#1655</a>
(<a href="https://github.com/wiwa">wiwa</a>)</li>
<li>Detect Scala 3 main outer methods to create code lenses
<a href="https://github.com/scalameta/metals/pull/1640">#1640</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>Delete all created folders created for the FileWatcher
<a href="https://github.com/scalameta/metals/pull/1629">#1629</a>
(<a href="https://github.com/mlachkar">mlachkar</a>)</li>
<li>goto Implementations with local alias types
<a href="https://github.com/scalameta/metals/pull/1598">#1598</a>
(<a href="https://github.com/eilite">eilite</a>)</li>
<li>Fix NewFileLspSuite on Windows
<a href="https://github.com/scalameta/metals/pull/1624">#1624</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>Update Sublime in the editors overview doc
<a href="https://github.com/scalameta/metals/pull/1631">#1631</a>
(<a href="https://github.com/ayoub-benali">ayoub-benali</a>)</li>
<li>Show date in logs <a href="https://github.com/scalameta/metals/pull/1630">#1630</a>
(<a href="https://github.com/mlachkar">mlachkar</a>)</li>
<li>Add support for Scala 3
<a href="https://github.com/scalameta/metals/pull/1523">#1523</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
<li>Update bloop-config, bloop-frontend, ... to 1.4.0-RC1-192-72a856b6
<a href="https://github.com/scalameta/metals/pull/1615">#1615</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Update guava to 29.0-jre
<a href="https://github.com/scalameta/metals/pull/1618">#1618</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Update flyway-core to 6.3.3
<a href="https://github.com/scalameta/metals/pull/1619">#1619</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Update ipcsocket to 1.0.1
<a href="https://github.com/scalameta/metals/pull/1621">#1621</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Update scalameta, semanticdb-scalac, ... to 4.3.8
<a href="https://github.com/scalameta/metals/pull/1623">#1623</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Update sbt, scripted-plugin to 1.3.9
<a href="https://github.com/scalameta/metals/pull/1620">#1620</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Update metaconfig-core to 0.9.10
<a href="https://github.com/scalameta/metals/pull/1617">#1617</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Update sbt-scalafix to 0.9.14
<a href="https://github.com/scalameta/metals/pull/1616">#1616</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Update munit, sbt-munit to 0.7.2
<a href="https://github.com/scalameta/metals/pull/1622">#1622</a>
(<a href="https://github.com/scala-steward">scala-steward</a>)</li>
<li>Don't generate timestamp in <code>.bsp/bloop.json</code> file.
<a href="https://github.com/scalameta/metals/pull/1612">#1612</a>
(<a href="https://github.com/olafurpg">olafurpg</a>)</li>
<li>Http client delegates <code>metalsInputBox</code> to the underlying client
<a href="https://github.com/scalameta/metals/pull/1613">#1613</a>
(<a href="https://github.com/alekseiAlefirov">alekseiAlefirov</a>)</li>
<li>Add properties for bloop zipkin tracing to fastpass
<a href="https://github.com/scalameta/metals/pull/1582">#1582</a>
(<a href="https://github.com/wiwa">wiwa</a>)</li>
<li>Update millw.bat <a href="https://github.com/scalameta/metals/pull/1602">#1602</a>
(<a href="https://github.com/kag0">kag0</a>)</li>
<li>Update installation guide for Sublime
<a href="https://github.com/scalameta/metals/pull/1597">#1597</a>
(<a href="https://github.com/ayoub-benali">ayoub-benali</a>)</li>
<li>Add release notes for 0.8.4 version
<a href="https://github.com/scalameta/metals/pull/1596">#1596</a>
(<a href="https://github.com/tgodzik">tgodzik</a>)</li>
</ul>
</span></div></article></div><div class="docs-prevnext"><a class="docs-next" href="/metals/blog/page2/">Next →</a></div></div></div></div></div><footer class="nav-footer" id="footer" style="background-color:#1B555C"><section class="sitemap"><a href="/metals/" class="nav-home"><img src="/metals/img/scalameta-logo.png" alt="Metals" width="66" height="58"/></a><div><h5>Overview</h5><a href="/metals/docs/editors/overview.html">Text Editors</a><a href="/metals/docs/build-tools/overview.html">Build Tools</a><a href="/metals/docs/contributors/project-goals.html">Project Goals</a><a href=" /metals/docs/contributors/getting-started.html">Contributing</a></div><div><h5>Editors</h5><a href="/metals/docs/editors/vscode.html">Visual Studio Code</a><a href="/metals/docs/editors/atom.html">Atom</a><a href="/metals/docs/editors/vim.html">Vim</a><a href="/metals/docs/editors/sublime.html">Sublime Text</a><a href="/metals/docs/editors/emacs.html">Emacs</a><a href="/metals/docs/editors/eclipse.html">Eclipse</a></div><div><h5>Social</h5><a href="https://github.com/scalameta/metals" target="_blank"><img src="https://img.shields.io/github/stars/scalameta/metals.svg?color=%23087e8b&amp;label=stars&amp;logo=github&amp;style=social"/></a><a href="https://discord.gg/RFpSVth" target="_blank"><img src="https://img.shields.io/discord/632642981228314653?logo=discord&amp;style=social"/></a><a href="https://gitter.im/scalameta/metals" target="_blank"><img src="https://img.shields.io/gitter/room/scalameta/metals.svg?logo=gitter&amp;style=social"/></a><a href="https://twitter.com/scalameta" target="_blank"><img src="https://img.shields.io/twitter/follow/scalameta.svg?logo=twitter&amp;style=social"/></a></div></section><section class="copyright">Copyright © 2020 Metals</section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: 'c865f6d974a3072a35d4b53d48ac2307',
                indexName: 'metals',
                inputSelector: '#search_input_react'
              });
            </script></body></html>